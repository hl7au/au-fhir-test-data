name: Validate

on:
  workflow_dispatch:
    inputs:
      path:
        description: "Path to validate"
        default: 'au-fhir-test-data-set/*.json'
        required: true
      report_title:
        description: "Report title"
        default: "AU Core"
        required: true
      ig:
        description: "Implementation guide used to validate"
        default: 'hl7.fhir.au.core#2.0.0-ballot'
        required: true
      tx:
        description: "Terminology server"
        default: "https://tx.dev.hl7.org.au/fhir"
        required: true

jobs:
  Run Validator:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout repository
      uses: actions/checkout@v4
    - name: Validate
      uses: ./.github/validate
      with:
        path: ${{ github.event.inputs.path }}
        ig: ${{ github.event.inputs.ig }}
        tx: ${{ github.event.inputs.tx }}
    - name: Report
      uses: ./.github/report
      with:
        title: ${{ github.event.inputs.report_title }}