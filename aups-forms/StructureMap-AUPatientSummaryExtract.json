{
    "resourceType": "StructureMap",
    "id": "AUPatientSummaryExtract",
    "url": "https://smartforms.csiro.au/ig/StructureMap/AUPatientSummaryExtract",
    "name": "AUPatientSummaryExtract",
    "status": "draft",
    "structure": [
        {
            "url": "http://hl7.org/fhir/StructureDefinition/QuestionnaireResponse",
            "mode": "source"
        },
        {
            "url": "http://hl7.org/fhir/StructureDefinition/Bundle",
            "mode": "target"
        }
    ],
    "group": [
        {
            "name": "bundleMap",
            "typeMode": "none",
            "input": [
                {
                    "name": "src",
                    "type": "QuestionnaireResponse",
                    "mode": "source"
                },
                {
                    "name": "bundle",
                    "type": "Bundle",
                    "mode": "target"
                }
            ],
            "rule": [
                {
                    "name": "item",
                    "source": [
                        {
                            "context": "src",
                            "element": "item"
                        }
                    ],
                    "target": [
                        {
                            "context": "bundle",
                            "contextType": "variable",
                            "element": "type",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "transaction"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "item",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "tabContainer"
                        }
                    ],
                    "rule": [
                        {
                            "name": "item",
                            "source": [
                                {
                                    "context": "tabContainer",
                                    "element": "item",
                                    "variable": "problemsItem",
                                    "condition": "(linkId = 'problems')"
                                }
                            ],
                            "rule": [
                                {
                                    "name": "item",
                                    "source": [
                                        {
                                            "context": "problemsItem",
                                            "element": "item",
                                            "variable": "problemdiagnosissummaryItem",
                                            "condition": "(linkId = 'problems-problemdiagnosissummary')"
                                        }
                                    ],
                                    "target": [
                                        {
                                            "context": "bundle",
                                            "contextType": "variable",
                                            "element": "entry",
                                            "variable": "entry"
                                        }
                                    ],
                                    "rule": [
                                        {
                                            "name": "68abac1df8914b968e54c5e514161a6d",
                                            "source": [
                                                {
                                                    "context": "problemsItem",
                                                    "condition": "(item.where(linkId = 'problems-problemdiagnosissummary-id').exists().not())"
                                                }
                                            ],
                                            "target": [
                                                {
                                                    "context": "entry",
                                                    "contextType": "variable",
                                                    "element": "request",
                                                    "variable": "request"
                                                }
                                            ],
                                            "rule": [
                                                {
                                                    "name": "e4bcddc756d945c78ae1e4ed929a2798",
                                                    "source": [
                                                        {
                                                            "context": "problemdiagnosissummaryItem"
                                                        }
                                                    ],
                                                    "target": [
                                                        {
                                                            "context": "entry",
                                                            "contextType": "variable",
                                                            "element": "fullUrl",
                                                            "variable": "uuid",
                                                            "transform": "uuid"
                                                        },
                                                        {
                                                            "context": "entry",
                                                            "contextType": "variable",
                                                            "element": "fullUrl",
                                                            "transform": "append",
                                                            "parameter": [
                                                                {
                                                                    "valueString": "urn:uuid:"
                                                                },
                                                                {
                                                                    "valueId": "uuid"
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "context": "request",
                                                            "contextType": "variable",
                                                            "element": "method",
                                                            "transform": "copy",
                                                            "parameter": [
                                                                {
                                                                    "valueString": "POST"
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "name": "4e7fd9dc27114f4fba587f0698bff06a",
                                                    "source": [
                                                        {
                                                            "context": "problemdiagnosissummaryItem"
                                                        }
                                                    ],
                                                    "target": [
                                                        {
                                                            "context": "entry",
                                                            "contextType": "variable",
                                                            "element": "resource",
                                                            "variable": "condition",
                                                            "transform": "create",
                                                            "parameter": [
                                                                {
                                                                    "valueString": "Condition"
                                                                }
                                                            ]
                                                        }
                                                    ],
                                                    "rule": [
                                                        {
                                                            "name": "27f11b68fa6a408da824a38db632a91f",
                                                            "source": [
                                                                {
                                                                    "context": "problemdiagnosissummaryItem"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "condition",
                                                                    "contextType": "variable",
                                                                    "element": "meta",
                                                                    "variable": "meta"
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "490fa60512244afbb5f90b14c5d8390c",
                                                                    "source": [
                                                                        {
                                                                            "context": "problemdiagnosissummaryItem"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "context": "meta",
                                                                            "contextType": "variable",
                                                                            "element": "profile",
                                                                            "transform": "copy",
                                                                            "parameter": [
                                                                                {
                                                                                    "valueString": "http://hl7.org.au/fhir/core/StructureDefinition/au-core-condition"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "name": "item",
                                                            "source": [
                                                                {
                                                                    "context": "problemdiagnosissummaryItem",
                                                                    "element": "item",
                                                                    "variable": "problemNameItem",
                                                                    "condition": "(linkId = 'problems-problemdiagnosissummary-name')"
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "answer",
                                                                    "source": [
                                                                        {
                                                                            "context": "problemNameItem",
                                                                            "element": "answer",
                                                                            "listMode": "first",
                                                                            "variable": "answer"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "context": "condition",
                                                                            "contextType": "variable",
                                                                            "element": "code",
                                                                            "variable": "code"
                                                                        }
                                                                    ],
                                                                    "rule": [
                                                                        {
                                                                            "name": "2e355e73f1cc4154bdcda1693a8002ed",
                                                                            "source": [
                                                                                {
                                                                                    "context": "answer"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "code",
                                                                                    "contextType": "variable",
                                                                                    "element": "coding",
                                                                                    "transform": "evaluate",
                                                                                    "parameter": [
                                                                                        {
                                                                                            "valueString": "%answer.value"
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "name": "bd46112ca7d7403487a978e194d454eb",
                                                                            "source": [
                                                                                {
                                                                                    "context": "answer"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "code",
                                                                                    "contextType": "variable",
                                                                                    "element": "text",
                                                                                    "transform": "evaluate",
                                                                                    "parameter": [
                                                                                        {
                                                                                            "valueString": "%answer.value.display"
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "name": "item",
                                                            "source": [
                                                                {
                                                                    "context": "problemdiagnosissummaryItem",
                                                                    "element": "item",
                                                                    "variable": "problemBodysiteItem",
                                                                    "condition": "(linkId = 'problems-problemdiagnosissummary-bodysite')"
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "answer",
                                                                    "source": [
                                                                        {
                                                                            "context": "problemBodysiteItem",
                                                                            "element": "answer",
                                                                            "listMode": "first",
                                                                            "variable": "answer"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "context": "condition",
                                                                            "contextType": "variable",
                                                                            "element": "bodySite",
                                                                            "variable": "bodySite"
                                                                        }
                                                                    ],
                                                                    "rule": [
                                                                        {
                                                                            "name": "117c85be339b44b784fd9e44aa4a551a",
                                                                            "source": [
                                                                                {
                                                                                    "context": "answer"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "bodySite",
                                                                                    "contextType": "variable",
                                                                                    "element": "coding",
                                                                                    "transform": "evaluate",
                                                                                    "parameter": [
                                                                                        {
                                                                                            "valueString": "%answer.value"
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "name": "3156c4b928d042febf0fb444521038c6",
                                                                            "source": [
                                                                                {
                                                                                    "context": "answer"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "bodySite",
                                                                                    "contextType": "variable",
                                                                                    "element": "text",
                                                                                    "transform": "evaluate",
                                                                                    "parameter": [
                                                                                        {
                                                                                            "valueString": "%answer.value.display"
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "name": "item",
                                                            "source": [
                                                                {
                                                                    "context": "problemdiagnosissummaryItem",
                                                                    "element": "item",
                                                                    "variable": "problemStatusItem",
                                                                    "condition": "(linkId = 'problems-problemdiagnosissummary-status')"
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "answer",
                                                                    "source": [
                                                                        {
                                                                            "context": "problemStatusItem",
                                                                            "element": "answer",
                                                                            "listMode": "first",
                                                                            "variable": "answer"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "context": "condition",
                                                                            "contextType": "variable",
                                                                            "element": "clinicalStatus",
                                                                            "variable": "clinicalStatus"
                                                                        }
                                                                    ],
                                                                    "rule": [
                                                                        {
                                                                            "name": "d32c9e42c63e4222970ec810a056e950",
                                                                            "source": [
                                                                                {
                                                                                    "context": "answer"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "clinicalStatus",
                                                                                    "contextType": "variable",
                                                                                    "element": "coding",
                                                                                    "transform": "evaluate",
                                                                                    "parameter": [
                                                                                        {
                                                                                            "valueString": "%answer.value"
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "name": "86547242813b44b395010c71c9ac0f43",
                                                                            "source": [
                                                                                {
                                                                                    "context": "answer"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "clinicalStatus",
                                                                                    "contextType": "variable",
                                                                                    "element": "text",
                                                                                    "transform": "evaluate",
                                                                                    "parameter": [
                                                                                        {
                                                                                            "valueString": "%answer.value.display"
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "name": "item",
                                                            "source": [
                                                                {
                                                                    "context": "problemdiagnosissummaryItem",
                                                                    "element": "item",
                                                                    "variable": "problemCommentItem",
                                                                    "condition": "(linkId = 'problems-problemdiagnosissummary-comment')"
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "answer",
                                                                    "source": [
                                                                        {
                                                                            "context": "problemCommentItem",
                                                                            "element": "answer",
                                                                            "listMode": "first",
                                                                            "variable": "answer"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "context": "condition",
                                                                            "contextType": "variable",
                                                                            "element": "note",
                                                                            "variable": "note"
                                                                        }
                                                                    ],
                                                                    "rule": [
                                                                        {
                                                                            "name": "83fcf461f8db4927a6b49acc6bfc5c6c",
                                                                            "source": [
                                                                                {
                                                                                    "context": "answer"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "note",
                                                                                    "contextType": "variable",
                                                                                    "element": "text",
                                                                                    "transform": "evaluate",
                                                                                    "parameter": [
                                                                                        {
                                                                                            "valueString": "%answer.value"
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "name": "89e645ab616d4f23882c507b013d2ad8",
                                                            "source": [
                                                                {
                                                                    "context": "problemdiagnosissummaryItem"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "condition",
                                                                    "contextType": "variable",
                                                                    "element": "category",
                                                                    "variable": "category",
                                                                    "transform": "cc",
                                                                    "parameter": [
                                                                        {
                                                                            "valueString": "http://terminology.hl7.org/CodeSystem/condition-category"
                                                                        },
                                                                        {
                                                                            "valueString": "problem-list-item"
                                                                        }
                                                                    ]
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "d88ec9fb43f54c1fa88dc420a4a5c010",
                                                                    "source": [
                                                                        {
                                                                            "context": "problemdiagnosissummaryItem"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "context": "category",
                                                                            "contextType": "variable",
                                                                            "element": "text",
                                                                            "transform": "copy",
                                                                            "parameter": [
                                                                                {
                                                                                    "valueString": "Problem"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "name": "subject",
                                                            "source": [
                                                                {
                                                                    "context": "src",
                                                                    "element": "subject",
                                                                    "variable": "subject"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "condition",
                                                                    "contextType": "variable",
                                                                    "element": "subject",
                                                                    "transform": "copy",
                                                                    "parameter": [
                                                                        {
                                                                            "valueId": "subject"
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ],
                            "documentation": "Problems"
                        },
                        {
                            "name": "item",
                            "source": [
                                {
                                    "context": "tabContainer",
                                    "element": "item",
                                    "variable": "allergyintolerancesItem",
                                    "condition": "(linkId = 'allergyintolerances')"
                                }
                            ],
                            "rule": [
                                {
                                    "name": "item",
                                    "source": [
                                        {
                                            "context": "allergyintolerancesItem",
                                            "element": "item",
                                            "variable": "adverseReactionItem",
                                            "condition": "(linkId = 'allergyintolerances-adversereactionrisksummary')"
                                        }
                                    ],
                                    "target": [
                                        {
                                            "context": "bundle",
                                            "contextType": "variable",
                                            "element": "entry",
                                            "variable": "entry"
                                        }
                                    ],
                                    "rule": [
                                        {
                                            "name": "f03417c2eb3d418ea394467d1ad6b415",
                                            "source": [
                                                {
                                                    "context": "adverseReactionItem",
                                                    "condition": "(item.where(linkId = 'allergyintolerances-adversereactionrisksummary-id').exists().not())"
                                                }
                                            ],
                                            "target": [
                                                {
                                                    "context": "entry",
                                                    "contextType": "variable",
                                                    "element": "request",
                                                    "variable": "request"
                                                }
                                            ],
                                            "rule": [
                                                {
                                                    "name": "019438b0ec8a4144aa8cc932b69c5c8d",
                                                    "source": [
                                                        {
                                                            "context": "adverseReactionItem"
                                                        }
                                                    ],
                                                    "target": [
                                                        {
                                                            "context": "entry",
                                                            "contextType": "variable",
                                                            "element": "fullUrl",
                                                            "variable": "uuid",
                                                            "transform": "uuid"
                                                        },
                                                        {
                                                            "context": "entry",
                                                            "contextType": "variable",
                                                            "element": "fullUrl",
                                                            "transform": "append",
                                                            "parameter": [
                                                                {
                                                                    "valueString": "urn:uuid:"
                                                                },
                                                                {
                                                                    "valueId": "uuid"
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "context": "request",
                                                            "contextType": "variable",
                                                            "element": "method",
                                                            "transform": "copy",
                                                            "parameter": [
                                                                {
                                                                    "valueString": "POST"
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "name": "4a547aa3cc754e9b9fbb90b733ac2509",
                                                    "source": [
                                                        {
                                                            "context": "adverseReactionItem"
                                                        }
                                                    ],
                                                    "target": [
                                                        {
                                                            "context": "entry",
                                                            "contextType": "variable",
                                                            "element": "resource",
                                                            "variable": "allergy",
                                                            "transform": "create",
                                                            "parameter": [
                                                                {
                                                                    "valueString": "AllergyIntolerance"
                                                                }
                                                            ]
                                                        }
                                                    ],
                                                    "rule": [
                                                        {
                                                            "name": "55ccc7a6177a4a52b557fe858333f83a",
                                                            "source": [
                                                                {
                                                                    "context": "adverseReactionItem"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "allergy",
                                                                    "contextType": "variable",
                                                                    "element": "meta",
                                                                    "variable": "meta"
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "7f40e1e12aca4727959cff638e0633dc",
                                                                    "source": [
                                                                        {
                                                                            "context": "adverseReactionItem"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "context": "meta",
                                                                            "contextType": "variable",
                                                                            "element": "profile",
                                                                            "transform": "copy",
                                                                            "parameter": [
                                                                                {
                                                                                    "valueString": "http://hl7.org.au/fhir/core/StructureDefinition/au-core-allergyintolerance"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "name": "item",
                                                            "source": [
                                                                {
                                                                    "context": "adverseReactionItem",
                                                                    "element": "item",
                                                                    "variable": "substanceItem",
                                                                    "condition": "(linkId = 'allergyintolerances-adversereactionrisksummary-substance')"
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "answer",
                                                                    "source": [
                                                                        {
                                                                            "context": "substanceItem",
                                                                            "element": "answer"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "context": "allergy",
                                                                            "contextType": "variable",
                                                                            "element": "code",
                                                                            "variable": "code"
                                                                        }
                                                                    ],
                                                                    "rule": [
                                                                        {
                                                                            "name": "answer",
                                                                            "source": [
                                                                                {
                                                                                    "context": "substanceItem",
                                                                                    "element": "answer"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "code",
                                                                                    "contextType": "variable",
                                                                                    "element": "coding",
                                                                                    "transform": "evaluate",
                                                                                    "parameter": [
                                                                                        {
                                                                                            "valueString": "%substanceItem.answer.value"
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "name": "answer",
                                                                            "source": [
                                                                                {
                                                                                    "context": "substanceItem",
                                                                                    "element": "answer"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "code",
                                                                                    "contextType": "variable",
                                                                                    "element": "text",
                                                                                    "transform": "evaluate",
                                                                                    "parameter": [
                                                                                        {
                                                                                            "valueString": "%substanceItem.answer.value.display"
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "name": "item",
                                                            "source": [
                                                                {
                                                                    "context": "adverseReactionItem",
                                                                    "element": "item",
                                                                    "variable": "manifestationItem",
                                                                    "condition": "(linkId = 'allergyintolerances-adversereactionrisksummary-manifestation')"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "allergy",
                                                                    "contextType": "variable",
                                                                    "element": "reaction",
                                                                    "variable": "reaction"
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "answer",
                                                                    "source": [
                                                                        {
                                                                            "context": "manifestationItem",
                                                                            "element": "answer",
                                                                            "variable": "manifestationItemAnswer"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "context": "reaction",
                                                                            "contextType": "variable",
                                                                            "element": "manifestation",
                                                                            "variable": "manifestation"
                                                                        }
                                                                    ],
                                                                    "rule": [
                                                                        {
                                                                            "name": "value",
                                                                            "source": [
                                                                                {
                                                                                    "context": "manifestationItemAnswer",
                                                                                    "element": "value",
                                                                                    "variable": "manifestationItemAnswerValue"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "manifestation",
                                                                                    "contextType": "variable",
                                                                                    "element": "coding",
                                                                                    "transform": "copy",
                                                                                    "parameter": [
                                                                                        {
                                                                                            "valueId": "manifestationItemAnswerValue"
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ],
                                                                            "rule": [
                                                                                {
                                                                                    "name": "display",
                                                                                    "source": [
                                                                                        {
                                                                                            "context": "manifestationItemAnswerValue",
                                                                                            "element": "display",
                                                                                            "variable": "manifestationItemAnswerValueDisplay"
                                                                                        }
                                                                                    ],
                                                                                    "target": [
                                                                                        {
                                                                                            "context": "manifestation",
                                                                                            "contextType": "variable",
                                                                                            "element": "text",
                                                                                            "transform": "copy",
                                                                                            "parameter": [
                                                                                                {
                                                                                                    "valueId": "manifestationItemAnswerValueDisplay"
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "name": "item",
                                                            "source": [
                                                                {
                                                                    "context": "adverseReactionItem",
                                                                    "element": "item",
                                                                    "variable": "comment",
                                                                    "condition": "(linkId = 'allergyintolerances-adversereactionrisksummary-comment')"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "allergy",
                                                                    "contextType": "variable",
                                                                    "element": "note",
                                                                    "variable": "note"
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "answer",
                                                                    "source": [
                                                                        {
                                                                            "context": "comment",
                                                                            "element": "answer"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "context": "note",
                                                                            "contextType": "variable",
                                                                            "element": "text",
                                                                            "transform": "evaluate",
                                                                            "parameter": [
                                                                                {
                                                                                    "valueString": "%comment.answer.value"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "name": "8f82f33c4ea74e25aec59da2ea341395",
                                                            "source": [
                                                                {
                                                                    "context": "adverseReactionItem"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "allergy",
                                                                    "contextType": "variable",
                                                                    "element": "clinicalStatus",
                                                                    "transform": "cc",
                                                                    "parameter": [
                                                                        {
                                                                            "valueString": "http://terminology.hl7.org/CodeSystem/allergyintolerance-clinical"
                                                                        },
                                                                        {
                                                                            "valueString": "active"
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "name": "subject",
                                                            "source": [
                                                                {
                                                                    "context": "src",
                                                                    "element": "subject"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "allergy",
                                                                    "contextType": "variable",
                                                                    "element": "patient",
                                                                    "transform": "evaluate",
                                                                    "parameter": [
                                                                        {
                                                                            "valueString": "%src.subject"
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ],
                            "documentation": "Allergies and Intolerances"
                        },
                        {
                            "name": "item",
                            "source": [
                                {
                                    "context": "tabContainer",
                                    "element": "item",
                                    "variable": "medicationsummaryItem",
                                    "condition": "(linkId = 'medicationsummary')"
                                }
                            ],
                            "rule": [
                                {
                                    "name": "item",
                                    "source": [
                                        {
                                            "context": "medicationsummaryItem",
                                            "element": "item",
                                            "variable": "medicationusestatementItem",
                                            "condition": "(linkId = 'medicationsummary-medicationusestatement')"
                                        }
                                    ],
                                    "target": [
                                        {
                                            "context": "bundle",
                                            "contextType": "variable",
                                            "element": "entry",
                                            "variable": "entry"
                                        }
                                    ],
                                    "rule": [
                                        {
                                            "name": "d1bef047f07540c684d279d68956f5c3",
                                            "source": [
                                                {
                                                    "context": "medicationusestatementItem",
                                                    "condition": "(item.where(linkId = 'medicationsummary-medicationusestatement-id').exists().not())"
                                                }
                                            ],
                                            "target": [
                                                {
                                                    "context": "entry",
                                                    "contextType": "variable",
                                                    "element": "request",
                                                    "variable": "request"
                                                }
                                            ],
                                            "rule": [
                                                {
                                                    "name": "d4467c90a9094d718ed4f8100417f268",
                                                    "source": [
                                                        {
                                                            "context": "medicationusestatementItem"
                                                        }
                                                    ],
                                                    "target": [
                                                        {
                                                            "context": "entry",
                                                            "contextType": "variable",
                                                            "element": "fullUrl",
                                                            "variable": "uuid",
                                                            "transform": "uuid"
                                                        },
                                                        {
                                                            "context": "entry",
                                                            "contextType": "variable",
                                                            "element": "fullUrl",
                                                            "transform": "append",
                                                            "parameter": [
                                                                {
                                                                    "valueString": "urn:uuid:"
                                                                },
                                                                {
                                                                    "valueId": "uuid"
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "context": "request",
                                                            "contextType": "variable",
                                                            "element": "method",
                                                            "transform": "copy",
                                                            "parameter": [
                                                                {
                                                                    "valueString": "POST"
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "name": "d3bb739577744d7487169d32e67a12a0",
                                                    "source": [
                                                        {
                                                            "context": "medicationusestatementItem"
                                                        }
                                                    ],
                                                    "target": [
                                                        {
                                                            "context": "entry",
                                                            "contextType": "variable",
                                                            "element": "resource",
                                                            "variable": "medicationstatement",
                                                            "transform": "create",
                                                            "parameter": [
                                                                {
                                                                    "valueString": "MedicationStatement"
                                                                }
                                                            ]
                                                        }
                                                    ],
                                                    "rule": [
                                                        {
                                                            "name": "9d86acbee24940b88f230d800c09c0a1",
                                                            "source": [
                                                                {
                                                                    "context": "medicationusestatementItem"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "medicationstatement",
                                                                    "contextType": "variable",
                                                                    "element": "meta",
                                                                    "variable": "meta"
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "a01d5b208e87491fbb86fe85bfcba011",
                                                                    "source": [
                                                                        {
                                                                            "context": "medicationusestatementItem"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "context": "meta",
                                                                            "contextType": "variable",
                                                                            "element": "profile",
                                                                            "transform": "copy",
                                                                            "parameter": [
                                                                                {
                                                                                    "valueString": "http://hl7.org.au/fhir/StructureDefinition/au-medicationstatement"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "name": "2b35913f3a924259b5ee4374c58eb9b2",
                                                            "source": [
                                                                {
                                                                    "context": "medicationusestatementItem"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "medicationstatement",
                                                                    "contextType": "variable",
                                                                    "element": "contained",
                                                                    "variable": "medication",
                                                                    "transform": "create",
                                                                    "parameter": [
                                                                        {
                                                                            "valueString": "Medication"
                                                                        }
                                                                    ]
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "433654edbe03475799ceb451d9d180e2",
                                                                    "source": [
                                                                        {
                                                                            "context": "medicationusestatementItem"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "context": "medication",
                                                                            "contextType": "variable",
                                                                            "element": "id",
                                                                            "transform": "copy",
                                                                            "parameter": [
                                                                                {
                                                                                    "valueString": "medication"
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "context": "medication",
                                                                            "contextType": "variable",
                                                                            "element": "meta",
                                                                            "variable": "meta"
                                                                        }
                                                                    ],
                                                                    "rule": [
                                                                        {
                                                                            "name": "3473451c3d424cd1833a5f251fa21640",
                                                                            "source": [
                                                                                {
                                                                                    "context": "medicationusestatementItem"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "meta",
                                                                                    "contextType": "variable",
                                                                                    "element": "profile",
                                                                                    "transform": "copy",
                                                                                    "parameter": [
                                                                                        {
                                                                                            "valueString": "http://hl7.org.au/fhir/core/StructureDefinition/au-core-medication"
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "name": "item",
                                                                    "source": [
                                                                        {
                                                                            "context": "medicationusestatementItem",
                                                                            "element": "item",
                                                                            "variable": "nameItem",
                                                                            "condition": "(linkId = 'medicationsummary-medicationusestatement-name')"
                                                                        }
                                                                    ],
                                                                    "rule": [
                                                                        {
                                                                            "name": "answer",
                                                                            "source": [
                                                                                {
                                                                                    "context": "nameItem",
                                                                                    "element": "answer",
                                                                                    "variable": "answer"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "medication",
                                                                                    "contextType": "variable",
                                                                                    "element": "code",
                                                                                    "variable": "code"
                                                                                }
                                                                            ],
                                                                            "rule": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "source": [
                                                                                        {
                                                                                            "context": "answer",
                                                                                            "element": "value",
                                                                                            "variable": "valueCoding",
                                                                                            "condition": "(ofType(Coding).exists())"
                                                                                        }
                                                                                    ],
                                                                                    "target": [
                                                                                        {
                                                                                            "context": "code",
                                                                                            "contextType": "variable",
                                                                                            "element": "coding",
                                                                                            "variable": "coding",
                                                                                            "listMode": [
                                                                                                "first"
                                                                                            ]
                                                                                        }
                                                                                    ],
                                                                                    "rule": [
                                                                                        {
                                                                                            "name": "2609d7a5c5074fa98c936fe23462916e",
                                                                                            "source": [
                                                                                                {
                                                                                                    "context": "valueCoding"
                                                                                                }
                                                                                            ],
                                                                                            "target": [
                                                                                                {
                                                                                                    "context": "coding",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "system",
                                                                                                    "transform": "evaluate",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "%valueCoding.system"
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "context": "coding",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "code",
                                                                                                    "transform": "evaluate",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "%valueCoding.code"
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "context": "coding",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "display",
                                                                                                    "transform": "evaluate",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "%valueCoding.display"
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "context": "code",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "text",
                                                                                                    "transform": "evaluate",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "%valueCoding.display"
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ],
                                                                    "documentation": "name -> MedicationStatement.contained:medication.code"
                                                                },
                                                                {
                                                                    "name": "item",
                                                                    "source": [
                                                                        {
                                                                            "context": "medicationusestatementItem",
                                                                            "element": "item",
                                                                            "variable": "formItem",
                                                                            "condition": "(linkId = 'medicationsummary-medicationusestatement-form')"
                                                                        }
                                                                    ],
                                                                    "rule": [
                                                                        {
                                                                            "name": "answer",
                                                                            "source": [
                                                                                {
                                                                                    "context": "formItem",
                                                                                    "element": "answer",
                                                                                    "variable": "answer"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "medication",
                                                                                    "contextType": "variable",
                                                                                    "element": "form",
                                                                                    "variable": "form"
                                                                                }
                                                                            ],
                                                                            "rule": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "source": [
                                                                                        {
                                                                                            "context": "answer",
                                                                                            "element": "value",
                                                                                            "variable": "valueCoding",
                                                                                            "condition": "(ofType(Coding).exists())"
                                                                                        }
                                                                                    ],
                                                                                    "target": [
                                                                                        {
                                                                                            "context": "form",
                                                                                            "contextType": "variable",
                                                                                            "element": "coding",
                                                                                            "variable": "coding",
                                                                                            "listMode": [
                                                                                                "first"
                                                                                            ]
                                                                                        }
                                                                                    ],
                                                                                    "rule": [
                                                                                        {
                                                                                            "name": "02ff8dd9a49b43ef9481babdc73028f2",
                                                                                            "source": [
                                                                                                {
                                                                                                    "context": "valueCoding"
                                                                                                }
                                                                                            ],
                                                                                            "target": [
                                                                                                {
                                                                                                    "context": "coding",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "system",
                                                                                                    "transform": "evaluate",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "%valueCoding.system"
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "context": "coding",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "code",
                                                                                                    "transform": "evaluate",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "%valueCoding.code"
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "context": "coding",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "display",
                                                                                                    "transform": "evaluate",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "%valueCoding.display"
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "context": "form",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "text",
                                                                                                    "transform": "evaluate",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "%valueCoding.display"
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ],
                                                                    "documentation": "form -> MedicationStatement.contained:medication.form"
                                                                },
                                                                {
                                                                    "name": "item",
                                                                    "source": [
                                                                        {
                                                                            "context": "medicationusestatementItem",
                                                                            "element": "item",
                                                                            "variable": "strengthItem",
                                                                            "condition": "(linkId = 'medicationsummary-medicationusestatement-strength')"
                                                                        }
                                                                    ],
                                                                    "rule": [
                                                                        {
                                                                            "name": "answer",
                                                                            "source": [
                                                                                {
                                                                                    "context": "strengthItem",
                                                                                    "element": "answer",
                                                                                    "variable": "answer"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "medication",
                                                                                    "contextType": "variable",
                                                                                    "element": "ingredient",
                                                                                    "variable": "ingredient"
                                                                                }
                                                                            ],
                                                                            "rule": [
                                                                                {
                                                                                    "name": "item",
                                                                                    "source": [
                                                                                        {
                                                                                            "context": "medicationusestatementItem",
                                                                                            "element": "item",
                                                                                            "variable": "nameItem",
                                                                                            "condition": "(linkId = 'medicationsummary-medicationusestatement-name')"
                                                                                        }
                                                                                    ],
                                                                                    "rule": [
                                                                                        {
                                                                                            "name": "answer",
                                                                                            "source": [
                                                                                                {
                                                                                                    "context": "nameItem",
                                                                                                    "element": "answer",
                                                                                                    "variable": "answer"
                                                                                                }
                                                                                            ],
                                                                                            "target": [
                                                                                                {
                                                                                                    "context": "ingredient",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "item",
                                                                                                    "variable": "item",
                                                                                                    "transform": "create",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "CodeableConcept"
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ],
                                                                                            "rule": [
                                                                                                {
                                                                                                    "name": "value",
                                                                                                    "source": [
                                                                                                        {
                                                                                                            "context": "answer",
                                                                                                            "element": "value",
                                                                                                            "variable": "valueCoding",
                                                                                                            "condition": "(ofType(Coding).exists())"
                                                                                                        }
                                                                                                    ],
                                                                                                    "target": [
                                                                                                        {
                                                                                                            "context": "item",
                                                                                                            "contextType": "variable",
                                                                                                            "element": "coding",
                                                                                                            "variable": "coding",
                                                                                                            "listMode": [
                                                                                                                "first"
                                                                                                            ]
                                                                                                        }
                                                                                                    ],
                                                                                                    "rule": [
                                                                                                        {
                                                                                                            "name": "03f75032234547f6823087dd8dee6573",
                                                                                                            "source": [
                                                                                                                {
                                                                                                                    "context": "valueCoding"
                                                                                                                }
                                                                                                            ],
                                                                                                            "target": [
                                                                                                                {
                                                                                                                    "context": "coding",
                                                                                                                    "contextType": "variable",
                                                                                                                    "element": "system",
                                                                                                                    "transform": "evaluate",
                                                                                                                    "parameter": [
                                                                                                                        {
                                                                                                                            "valueString": "%valueCoding.system"
                                                                                                                        }
                                                                                                                    ]
                                                                                                                },
                                                                                                                {
                                                                                                                    "context": "coding",
                                                                                                                    "contextType": "variable",
                                                                                                                    "element": "code",
                                                                                                                    "transform": "evaluate",
                                                                                                                    "parameter": [
                                                                                                                        {
                                                                                                                            "valueString": "%valueCoding.code"
                                                                                                                        }
                                                                                                                    ]
                                                                                                                },
                                                                                                                {
                                                                                                                    "context": "coding",
                                                                                                                    "contextType": "variable",
                                                                                                                    "element": "display",
                                                                                                                    "transform": "evaluate",
                                                                                                                    "parameter": [
                                                                                                                        {
                                                                                                                            "valueString": "%valueCoding.display"
                                                                                                                        }
                                                                                                                    ]
                                                                                                                },
                                                                                                                {
                                                                                                                    "context": "item",
                                                                                                                    "contextType": "variable",
                                                                                                                    "element": "text",
                                                                                                                    "transform": "evaluate",
                                                                                                                    "parameter": [
                                                                                                                        {
                                                                                                                            "valueString": "%valueCoding.display"
                                                                                                                        }
                                                                                                                    ]
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "name": "cfe65e6016c2451a9929b018ba06f5b9",
                                                                                    "source": [
                                                                                        {
                                                                                            "context": "answer"
                                                                                        }
                                                                                    ],
                                                                                    "target": [
                                                                                        {
                                                                                            "context": "ingredient",
                                                                                            "contextType": "variable",
                                                                                            "element": "strength",
                                                                                            "variable": "strength"
                                                                                        }
                                                                                    ],
                                                                                    "rule": [
                                                                                        {
                                                                                            "name": "d1a77b9740d24a0f842c196c27407b70",
                                                                                            "source": [
                                                                                                {
                                                                                                    "context": "answer"
                                                                                                }
                                                                                            ],
                                                                                            "target": [
                                                                                                {
                                                                                                    "context": "strength",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "numerator",
                                                                                                    "variable": "numerator"
                                                                                                }
                                                                                            ],
                                                                                            "rule": [
                                                                                                {
                                                                                                    "name": "9548a875c55e49bda53f15c43bc3ee10",
                                                                                                    "source": [
                                                                                                        {
                                                                                                            "context": "answer"
                                                                                                        }
                                                                                                    ],
                                                                                                    "target": [
                                                                                                        {
                                                                                                            "context": "numerator",
                                                                                                            "contextType": "variable",
                                                                                                            "element": "value",
                                                                                                            "transform": "evaluate",
                                                                                                            "parameter": [
                                                                                                                {
                                                                                                                    "valueString": "%answer.value"
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "name": "item",
                                                                                                    "source": [
                                                                                                        {
                                                                                                            "context": "strengthItem",
                                                                                                            "element": "item",
                                                                                                            "variable": "strengthunitItem",
                                                                                                            "condition": "(linkId = 'medicationsummary-medicationusestatement-strength-unit')"
                                                                                                        }
                                                                                                    ],
                                                                                                    "rule": [
                                                                                                        {
                                                                                                            "name": "answer",
                                                                                                            "source": [
                                                                                                                {
                                                                                                                    "context": "strengthunitItem",
                                                                                                                    "element": "answer",
                                                                                                                    "variable": "unitAnswer"
                                                                                                                }
                                                                                                            ],
                                                                                                            "target": [
                                                                                                                {
                                                                                                                    "context": "numerator",
                                                                                                                    "contextType": "variable",
                                                                                                                    "element": "code",
                                                                                                                    "transform": "evaluate",
                                                                                                                    "parameter": [
                                                                                                                        {
                                                                                                                            "valueString": "%unitAnswer.value.code"
                                                                                                                        }
                                                                                                                    ]
                                                                                                                },
                                                                                                                {
                                                                                                                    "context": "numerator",
                                                                                                                    "contextType": "variable",
                                                                                                                    "element": "system",
                                                                                                                    "transform": "evaluate",
                                                                                                                    "parameter": [
                                                                                                                        {
                                                                                                                            "valueString": "%unitAnswer.value.system"
                                                                                                                        }
                                                                                                                    ]
                                                                                                                },
                                                                                                                {
                                                                                                                    "context": "numerator",
                                                                                                                    "contextType": "variable",
                                                                                                                    "element": "unit",
                                                                                                                    "transform": "evaluate",
                                                                                                                    "parameter": [
                                                                                                                        {
                                                                                                                            "valueString": "%unitAnswer.value.display"
                                                                                                                        }
                                                                                                                    ]
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ],
                                                                    "documentation": "strength -> MedicationStatement.contained:medication.ingredient.strength"
                                                                }
                                                            ],
                                                            "documentation": "contained:medication"
                                                        },
                                                        {
                                                            "name": "85a2c27d9f07498995b5d66939e4fcfe",
                                                            "source": [
                                                                {
                                                                    "context": "medicationusestatementItem"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "medicationstatement",
                                                                    "contextType": "variable",
                                                                    "element": "medication",
                                                                    "variable": "medicationReference",
                                                                    "transform": "create",
                                                                    "parameter": [
                                                                        {
                                                                            "valueString": "Reference"
                                                                        }
                                                                    ]
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "0bdce168d75742f2ae58eec0deefeb76",
                                                                    "source": [
                                                                        {
                                                                            "context": "medicationusestatementItem"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "context": "medicationReference",
                                                                            "contextType": "variable",
                                                                            "element": "reference",
                                                                            "transform": "copy",
                                                                            "parameter": [
                                                                                {
                                                                                    "valueString": "#medication"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "name": "f975dfdef7024c6da3f753e7791f7dc7",
                                                            "source": [
                                                                {
                                                                    "context": "medicationusestatementItem"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "medicationstatement",
                                                                    "contextType": "variable",
                                                                    "element": "dosage",
                                                                    "variable": "dosage"
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "item",
                                                                    "source": [
                                                                        {
                                                                            "context": "medicationusestatementItem",
                                                                            "element": "item",
                                                                            "variable": "route",
                                                                            "condition": "(linkId = 'medicationsummary-medicationusestatement-route')"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "transform": "copy",
                                                                            "parameter": [
                                                                                {
                                                                                    "valueId": "medicationstatement"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ],
                                                                    "rule": [
                                                                        {
                                                                            "name": "answer",
                                                                            "source": [
                                                                                {
                                                                                    "context": "route",
                                                                                    "element": "answer",
                                                                                    "variable": "answer"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "dosage",
                                                                                    "contextType": "variable",
                                                                                    "element": "route",
                                                                                    "variable": "route"
                                                                                }
                                                                            ],
                                                                            "rule": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "source": [
                                                                                        {
                                                                                            "context": "answer",
                                                                                            "element": "value",
                                                                                            "variable": "valueCoding",
                                                                                            "condition": "(ofType(Coding).exists())"
                                                                                        }
                                                                                    ],
                                                                                    "target": [
                                                                                        {
                                                                                            "context": "route",
                                                                                            "contextType": "variable",
                                                                                            "element": "coding",
                                                                                            "variable": "coding"
                                                                                        }
                                                                                    ],
                                                                                    "rule": [
                                                                                        {
                                                                                            "name": "c53b4d1667d8490aa5b243dd7576e415",
                                                                                            "source": [
                                                                                                {
                                                                                                    "context": "valueCoding"
                                                                                                }
                                                                                            ],
                                                                                            "target": [
                                                                                                {
                                                                                                    "context": "coding",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "system",
                                                                                                    "transform": "evaluate",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "%valueCoding.system"
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "context": "coding",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "code",
                                                                                                    "transform": "evaluate",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "%valueCoding.code"
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "context": "coding",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "display",
                                                                                                    "transform": "evaluate",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "%valueCoding.display"
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "context": "route",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "text",
                                                                                                    "transform": "evaluate",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "%valueCoding.display"
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ],
                                                                    "documentation": "route -> MedicationStatement.dosage.route"
                                                                },
                                                                {
                                                                    "name": "item",
                                                                    "source": [
                                                                        {
                                                                            "context": "medicationusestatementItem",
                                                                            "element": "item",
                                                                            "variable": "doseItem",
                                                                            "condition": "(linkId = 'medicationsummary-medicationusestatement-doseamount')"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "transform": "copy",
                                                                            "parameter": [
                                                                                {
                                                                                    "valueId": "medicationstatement"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ],
                                                                    "rule": [
                                                                        {
                                                                            "name": "answer",
                                                                            "source": [
                                                                                {
                                                                                    "context": "doseItem",
                                                                                    "element": "answer",
                                                                                    "variable": "answer"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "dosage",
                                                                                    "contextType": "variable",
                                                                                    "element": "doseAndRate",
                                                                                    "variable": "doseAndRate",
                                                                                    "listMode": [
                                                                                        "first"
                                                                                    ]
                                                                                }
                                                                            ],
                                                                            "rule": [
                                                                                {
                                                                                    "name": "5836205c59c146dbb5c7ebb20b18c77e",
                                                                                    "source": [
                                                                                        {
                                                                                            "context": "answer"
                                                                                        }
                                                                                    ],
                                                                                    "target": [
                                                                                        {
                                                                                            "context": "doseAndRate",
                                                                                            "contextType": "variable",
                                                                                            "element": "dose",
                                                                                            "variable": "doseQuantity",
                                                                                            "transform": "create",
                                                                                            "parameter": [
                                                                                                {
                                                                                                    "valueString": "Quantity"
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ],
                                                                                    "rule": [
                                                                                        {
                                                                                            "name": "ab08b7d4cfae4ff38e8bbed95282bfdb",
                                                                                            "source": [
                                                                                                {
                                                                                                    "context": "answer"
                                                                                                }
                                                                                            ],
                                                                                            "target": [
                                                                                                {
                                                                                                    "context": "doseQuantity",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "value",
                                                                                                    "transform": "evaluate",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "%answer.value"
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "name": "item",
                                                                                            "source": [
                                                                                                {
                                                                                                    "context": "doseItem",
                                                                                                    "element": "item",
                                                                                                    "variable": "doseunitItem",
                                                                                                    "condition": "(linkId = 'medicationsummary-medicationusestatement-doseamount-unit')"
                                                                                                }
                                                                                            ],
                                                                                            "rule": [
                                                                                                {
                                                                                                    "name": "answer",
                                                                                                    "source": [
                                                                                                        {
                                                                                                            "context": "doseunitItem",
                                                                                                            "element": "answer",
                                                                                                            "variable": "unitAnswer"
                                                                                                        }
                                                                                                    ],
                                                                                                    "target": [
                                                                                                        {
                                                                                                            "context": "doseQuantity",
                                                                                                            "contextType": "variable",
                                                                                                            "element": "code",
                                                                                                            "transform": "evaluate",
                                                                                                            "parameter": [
                                                                                                                {
                                                                                                                    "valueString": "%unitAnswer.value.code"
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "context": "doseQuantity",
                                                                                                            "contextType": "variable",
                                                                                                            "element": "system",
                                                                                                            "transform": "evaluate",
                                                                                                            "parameter": [
                                                                                                                {
                                                                                                                    "valueString": "%unitAnswer.value.system"
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "context": "doseQuantity",
                                                                                                            "contextType": "variable",
                                                                                                            "element": "unit",
                                                                                                            "transform": "evaluate",
                                                                                                            "parameter": [
                                                                                                                {
                                                                                                                    "valueString": "%unitAnswer.value.display"
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ],
                                                                    "documentation": "dose amount -> MedicationStatement.dosage.doseAndRate"
                                                                },
                                                                {
                                                                    "name": "item",
                                                                    "source": [
                                                                        {
                                                                            "context": "medicationusestatementItem",
                                                                            "element": "item",
                                                                            "variable": "dosetiming",
                                                                            "condition": "(linkId = 'medicationsummary-medicationusestatement-dosetiming')"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "transform": "copy",
                                                                            "parameter": [
                                                                                {
                                                                                    "valueId": "medicationstatement"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ],
                                                                    "rule": [
                                                                        {
                                                                            "name": "answer",
                                                                            "source": [
                                                                                {
                                                                                    "context": "dosetiming",
                                                                                    "element": "answer",
                                                                                    "variable": "answer"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "dosage",
                                                                                    "contextType": "variable",
                                                                                    "element": "timing",
                                                                                    "variable": "timing"
                                                                                }
                                                                            ],
                                                                            "rule": [
                                                                                {
                                                                                    "name": "a5bdb12b28904ce2b518bff0a2f7449d",
                                                                                    "source": [
                                                                                        {
                                                                                            "context": "answer"
                                                                                        }
                                                                                    ],
                                                                                    "target": [
                                                                                        {
                                                                                            "context": "timing",
                                                                                            "contextType": "variable",
                                                                                            "element": "code",
                                                                                            "variable": "code"
                                                                                        }
                                                                                    ],
                                                                                    "rule": [
                                                                                        {
                                                                                            "name": "value",
                                                                                            "source": [
                                                                                                {
                                                                                                    "context": "answer",
                                                                                                    "element": "value",
                                                                                                    "variable": "valueCoding",
                                                                                                    "condition": "(ofType(Coding).exists())"
                                                                                                }
                                                                                            ],
                                                                                            "target": [
                                                                                                {
                                                                                                    "context": "code",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "coding",
                                                                                                    "variable": "codeCoding"
                                                                                                }
                                                                                            ],
                                                                                            "rule": [
                                                                                                {
                                                                                                    "name": "601a8556ad1c457294c4da514c713bea",
                                                                                                    "source": [
                                                                                                        {
                                                                                                            "context": "valueCoding"
                                                                                                        }
                                                                                                    ],
                                                                                                    "target": [
                                                                                                        {
                                                                                                            "context": "codeCoding",
                                                                                                            "contextType": "variable",
                                                                                                            "element": "system",
                                                                                                            "transform": "evaluate",
                                                                                                            "parameter": [
                                                                                                                {
                                                                                                                    "valueString": "%valueCoding.system"
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "context": "codeCoding",
                                                                                                            "contextType": "variable",
                                                                                                            "element": "code",
                                                                                                            "transform": "evaluate",
                                                                                                            "parameter": [
                                                                                                                {
                                                                                                                    "valueString": "%valueCoding.code"
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "context": "codeCoding",
                                                                                                            "contextType": "variable",
                                                                                                            "element": "display",
                                                                                                            "transform": "evaluate",
                                                                                                            "parameter": [
                                                                                                                {
                                                                                                                    "valueString": "%valueCoding.display"
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "context": "code",
                                                                                                            "contextType": "variable",
                                                                                                            "element": "text",
                                                                                                            "transform": "evaluate",
                                                                                                            "parameter": [
                                                                                                                {
                                                                                                                    "valueString": "%valueCoding.display"
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "name": "value",
                                                                                            "source": [
                                                                                                {
                                                                                                    "context": "answer",
                                                                                                    "element": "value",
                                                                                                    "variable": "valueString",
                                                                                                    "condition": "(ofType(String).exists())"
                                                                                                }
                                                                                            ],
                                                                                            "target": [
                                                                                                {
                                                                                                    "context": "code",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "text",
                                                                                                    "transform": "copy",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueId": "valueString"
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ],
                                                                    "documentation": "dose timing -> MedicationStatement.dosage.timing.code"
                                                                }
                                                            ],
                                                            "documentation": "dosage"
                                                        },
                                                        {
                                                            "name": "item",
                                                            "source": [
                                                                {
                                                                    "context": "medicationusestatementItem",
                                                                    "element": "item",
                                                                    "variable": "indication",
                                                                    "condition": "(linkId = 'medicationsummary-medicationusestatement-reasoncode')"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "transform": "copy",
                                                                    "parameter": [
                                                                        {
                                                                            "valueId": "medicationstatement"
                                                                        }
                                                                    ]
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "answer",
                                                                    "source": [
                                                                        {
                                                                            "context": "indication",
                                                                            "element": "answer",
                                                                            "variable": "answer"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "context": "medicationstatement",
                                                                            "contextType": "variable",
                                                                            "element": "reasonCode",
                                                                            "variable": "reasoncode"
                                                                        }
                                                                    ],
                                                                    "rule": [
                                                                        {
                                                                            "name": "value",
                                                                            "source": [
                                                                                {
                                                                                    "context": "answer",
                                                                                    "element": "value",
                                                                                    "variable": "value"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "reasoncode",
                                                                                    "contextType": "variable",
                                                                                    "element": "coding",
                                                                                    "variable": "coding"
                                                                                }
                                                                            ],
                                                                            "rule": [
                                                                                {
                                                                                    "name": "686fa27d97954b23bf9b64f2841a4dd9",
                                                                                    "source": [
                                                                                        {
                                                                                            "context": "value"
                                                                                        }
                                                                                    ],
                                                                                    "target": [
                                                                                        {
                                                                                            "context": "coding",
                                                                                            "contextType": "variable",
                                                                                            "element": "system",
                                                                                            "transform": "evaluate",
                                                                                            "parameter": [
                                                                                                {
                                                                                                    "valueString": "%value.system"
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "context": "coding",
                                                                                            "contextType": "variable",
                                                                                            "element": "code",
                                                                                            "transform": "evaluate",
                                                                                            "parameter": [
                                                                                                {
                                                                                                    "valueString": "%value.code"
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "context": "coding",
                                                                                            "contextType": "variable",
                                                                                            "element": "display",
                                                                                            "transform": "evaluate",
                                                                                            "parameter": [
                                                                                                {
                                                                                                    "valueString": "%value.display"
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "context": "reasoncode",
                                                                                            "contextType": "variable",
                                                                                            "element": "text",
                                                                                            "transform": "evaluate",
                                                                                            "parameter": [
                                                                                                {
                                                                                                    "valueString": "%value.display"
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ],
                                                            "documentation": "clinical indication -> MedicationStatement.reasonCode"
                                                        },
                                                        {
                                                            "name": "item",
                                                            "source": [
                                                                {
                                                                    "context": "medicationusestatementItem",
                                                                    "element": "item",
                                                                    "variable": "comment",
                                                                    "condition": "(linkId = 'medicationsummary-medicationusestatement-comment')"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "medicationstatement",
                                                                    "contextType": "variable",
                                                                    "element": "note",
                                                                    "variable": "note"
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "answer",
                                                                    "source": [
                                                                        {
                                                                            "context": "comment",
                                                                            "element": "answer"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "context": "note",
                                                                            "contextType": "variable",
                                                                            "element": "text",
                                                                            "transform": "evaluate",
                                                                            "parameter": [
                                                                                {
                                                                                    "valueString": "%comment.answer.value"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ],
                                                            "documentation": "comment -> MedicationStatement.note"
                                                        },
                                                        {
                                                            "name": "15659ce2906c4a4088fd002a6d88cc6c",
                                                            "source": [
                                                                {
                                                                    "context": "medicationusestatementItem"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "medicationstatement",
                                                                    "contextType": "variable",
                                                                    "element": "status",
                                                                    "transform": "copy",
                                                                    "parameter": [
                                                                        {
                                                                            "valueString": "completed"
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "name": "subject",
                                                            "source": [
                                                                {
                                                                    "context": "src",
                                                                    "element": "subject"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "medicationstatement",
                                                                    "contextType": "variable",
                                                                    "element": "subject",
                                                                    "transform": "evaluate",
                                                                    "parameter": [
                                                                        {
                                                                            "valueString": "%src.subject"
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "name": "item",
                                    "source": [
                                        {
                                            "context": "medicationsummaryItem",
                                            "element": "item",
                                            "variable": "prescribedmedicationItem",
                                            "condition": "(linkId = 'medicationsummary-prescribedmedication')"
                                        }
                                    ],
                                    "target": [
                                        {
                                            "context": "bundle",
                                            "contextType": "variable",
                                            "element": "entry",
                                            "variable": "entry"
                                        }
                                    ],
                                    "rule": [
                                        {
                                            "name": "217bcdcaf9044d89a42eef576d120ef8",
                                            "source": [
                                                {
                                                    "context": "prescribedmedicationItem",
                                                    "condition": "(item.where(linkId = 'medicationsummary-prescribedmedication-id').exists().not())"
                                                }
                                            ],
                                            "target": [
                                                {
                                                    "context": "entry",
                                                    "contextType": "variable",
                                                    "element": "request",
                                                    "variable": "request"
                                                }
                                            ],
                                            "rule": [
                                                {
                                                    "name": "7e5d5595c55d468cb027837d47de9fb0",
                                                    "source": [
                                                        {
                                                            "context": "prescribedmedicationItem"
                                                        }
                                                    ],
                                                    "target": [
                                                        {
                                                            "context": "entry",
                                                            "contextType": "variable",
                                                            "element": "fullUrl",
                                                            "variable": "uuid",
                                                            "transform": "uuid"
                                                        },
                                                        {
                                                            "context": "entry",
                                                            "contextType": "variable",
                                                            "element": "fullUrl",
                                                            "transform": "append",
                                                            "parameter": [
                                                                {
                                                                    "valueString": "urn:uuid:"
                                                                },
                                                                {
                                                                    "valueId": "uuid"
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "context": "request",
                                                            "contextType": "variable",
                                                            "element": "method",
                                                            "transform": "copy",
                                                            "parameter": [
                                                                {
                                                                    "valueString": "POST"
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "name": "943e5eae5b4a45adb3f28999a74d3790",
                                                    "source": [
                                                        {
                                                            "context": "prescribedmedicationItem"
                                                        }
                                                    ],
                                                    "target": [
                                                        {
                                                            "context": "entry",
                                                            "contextType": "variable",
                                                            "element": "resource",
                                                            "variable": "medicationrequest",
                                                            "transform": "create",
                                                            "parameter": [
                                                                {
                                                                    "valueString": "MedicationRequest"
                                                                }
                                                            ]
                                                        }
                                                    ],
                                                    "rule": [
                                                        {
                                                            "name": "0bbfd327453943ec8f911d2a72d788b0",
                                                            "source": [
                                                                {
                                                                    "context": "prescribedmedicationItem"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "medicationrequest",
                                                                    "contextType": "variable",
                                                                    "element": "meta",
                                                                    "variable": "meta"
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "26423ef13d37469aa9d3c0ece5a7488e",
                                                                    "source": [
                                                                        {
                                                                            "context": "prescribedmedicationItem"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "context": "meta",
                                                                            "contextType": "variable",
                                                                            "element": "profile",
                                                                            "transform": "copy",
                                                                            "parameter": [
                                                                                {
                                                                                    "valueString": "http://hl7.org.au/fhir/core/StructureDefinition/au-core-medicationrequest"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "name": "42bd59d9ac6b4946a146f3f5bde59df9",
                                                            "source": [
                                                                {
                                                                    "context": "prescribedmedicationItem"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "medicationrequest",
                                                                    "contextType": "variable",
                                                                    "element": "contained",
                                                                    "variable": "medication",
                                                                    "transform": "create",
                                                                    "parameter": [
                                                                        {
                                                                            "valueString": "Medication"
                                                                        }
                                                                    ]
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "c91029a2bd694c34968358d92be8d21a",
                                                                    "source": [
                                                                        {
                                                                            "context": "prescribedmedicationItem"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "context": "medication",
                                                                            "contextType": "variable",
                                                                            "element": "id",
                                                                            "transform": "copy",
                                                                            "parameter": [
                                                                                {
                                                                                    "valueString": "medication"
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "context": "medication",
                                                                            "contextType": "variable",
                                                                            "element": "meta",
                                                                            "variable": "meta"
                                                                        }
                                                                    ],
                                                                    "rule": [
                                                                        {
                                                                            "name": "11d658ca1fc3417397bc9f31fdadebc8",
                                                                            "source": [
                                                                                {
                                                                                    "context": "prescribedmedicationItem"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "meta",
                                                                                    "contextType": "variable",
                                                                                    "element": "profile",
                                                                                    "transform": "copy",
                                                                                    "parameter": [
                                                                                        {
                                                                                            "valueString": "http://hl7.org.au/fhir/core/StructureDefinition/au-core-medication"
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "name": "item",
                                                                    "source": [
                                                                        {
                                                                            "context": "prescribedmedicationItem",
                                                                            "element": "item",
                                                                            "variable": "nameItem",
                                                                            "condition": "(linkId = 'medicationsummary-prescribedmedication-name')"
                                                                        }
                                                                    ],
                                                                    "rule": [
                                                                        {
                                                                            "name": "answer",
                                                                            "source": [
                                                                                {
                                                                                    "context": "nameItem",
                                                                                    "element": "answer",
                                                                                    "variable": "answer"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "medication",
                                                                                    "contextType": "variable",
                                                                                    "element": "code",
                                                                                    "variable": "code"
                                                                                }
                                                                            ],
                                                                            "rule": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "source": [
                                                                                        {
                                                                                            "context": "answer",
                                                                                            "element": "value",
                                                                                            "variable": "valueCoding",
                                                                                            "condition": "(ofType(Coding).exists())"
                                                                                        }
                                                                                    ],
                                                                                    "target": [
                                                                                        {
                                                                                            "context": "code",
                                                                                            "contextType": "variable",
                                                                                            "element": "coding",
                                                                                            "variable": "coding",
                                                                                            "listMode": [
                                                                                                "first"
                                                                                            ]
                                                                                        }
                                                                                    ],
                                                                                    "rule": [
                                                                                        {
                                                                                            "name": "6931b8e3fef444f4bfdcae36891ce07d",
                                                                                            "source": [
                                                                                                {
                                                                                                    "context": "valueCoding"
                                                                                                }
                                                                                            ],
                                                                                            "target": [
                                                                                                {
                                                                                                    "context": "coding",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "system",
                                                                                                    "transform": "evaluate",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "%valueCoding.system"
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "context": "coding",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "code",
                                                                                                    "transform": "evaluate",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "%valueCoding.code"
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "context": "coding",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "display",
                                                                                                    "transform": "evaluate",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "%valueCoding.display"
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "context": "code",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "text",
                                                                                                    "transform": "evaluate",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "%valueCoding.display"
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "name": "44148b0603b144dbae785d4f9038631f",
                                                                                            "source": [
                                                                                                {
                                                                                                    "context": "prescribedmedicationItem"
                                                                                                }
                                                                                            ],
                                                                                            "target": [
                                                                                                {
                                                                                                    "context": "medicationrequest",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "medication",
                                                                                                    "variable": "medicationReference",
                                                                                                    "transform": "create",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "Reference"
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ],
                                                                                            "rule": [
                                                                                                {
                                                                                                    "name": "6fe48440661d4daebe2674afcaf75d15",
                                                                                                    "source": [
                                                                                                        {
                                                                                                            "context": "prescribedmedicationItem"
                                                                                                        }
                                                                                                    ],
                                                                                                    "target": [
                                                                                                        {
                                                                                                            "context": "medicationReference",
                                                                                                            "contextType": "variable",
                                                                                                            "element": "reference",
                                                                                                            "transform": "copy",
                                                                                                            "parameter": [
                                                                                                                {
                                                                                                                    "valueString": "#medication"
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "context": "medicationReference",
                                                                                                            "contextType": "variable",
                                                                                                            "element": "display",
                                                                                                            "transform": "evaluate",
                                                                                                            "parameter": [
                                                                                                                {
                                                                                                                    "valueString": "%valueCoding.display"
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ],
                                                                                            "documentation": "medicationReference"
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ],
                                                                    "documentation": "name -> MedicationRequest.contained:medication.code"
                                                                },
                                                                {
                                                                    "name": "item",
                                                                    "source": [
                                                                        {
                                                                            "context": "prescribedmedicationItem",
                                                                            "element": "item",
                                                                            "variable": "formItem",
                                                                            "condition": "(linkId = 'medicationsummary-prescribedmedication-form')"
                                                                        }
                                                                    ],
                                                                    "rule": [
                                                                        {
                                                                            "name": "answer",
                                                                            "source": [
                                                                                {
                                                                                    "context": "formItem",
                                                                                    "element": "answer",
                                                                                    "variable": "answer"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "medication",
                                                                                    "contextType": "variable",
                                                                                    "element": "form",
                                                                                    "variable": "form"
                                                                                }
                                                                            ],
                                                                            "rule": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "source": [
                                                                                        {
                                                                                            "context": "answer",
                                                                                            "element": "value",
                                                                                            "variable": "valueCoding",
                                                                                            "condition": "(ofType(Coding).exists())"
                                                                                        }
                                                                                    ],
                                                                                    "target": [
                                                                                        {
                                                                                            "context": "form",
                                                                                            "contextType": "variable",
                                                                                            "element": "coding",
                                                                                            "variable": "coding",
                                                                                            "listMode": [
                                                                                                "first"
                                                                                            ]
                                                                                        }
                                                                                    ],
                                                                                    "rule": [
                                                                                        {
                                                                                            "name": "b620b675cd424171bde5759b8d26e567",
                                                                                            "source": [
                                                                                                {
                                                                                                    "context": "valueCoding"
                                                                                                }
                                                                                            ],
                                                                                            "target": [
                                                                                                {
                                                                                                    "context": "coding",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "system",
                                                                                                    "transform": "evaluate",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "%valueCoding.system"
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "context": "coding",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "code",
                                                                                                    "transform": "evaluate",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "%valueCoding.code"
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "context": "coding",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "display",
                                                                                                    "transform": "evaluate",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "%valueCoding.display"
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "context": "form",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "text",
                                                                                                    "transform": "evaluate",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "%valueCoding.display"
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ],
                                                                    "documentation": "form -> MedicationRequest.contained:medication.form"
                                                                }
                                                            ],
                                                            "documentation": "contained:medication"
                                                        },
                                                        {
                                                            "name": "bca9a7b233a3471f9b5970cfa71cd54a",
                                                            "source": [
                                                                {
                                                                    "context": "prescribedmedicationItem"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "medicationrequest",
                                                                    "contextType": "variable",
                                                                    "element": "dosageInstruction",
                                                                    "variable": "dosage"
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "item",
                                                                    "source": [
                                                                        {
                                                                            "context": "prescribedmedicationItem",
                                                                            "element": "item",
                                                                            "variable": "route",
                                                                            "condition": "(linkId = 'medicationsummary-prescribedmedication-route')"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "transform": "copy",
                                                                            "parameter": [
                                                                                {
                                                                                    "valueId": "medicationrequest"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ],
                                                                    "rule": [
                                                                        {
                                                                            "name": "answer",
                                                                            "source": [
                                                                                {
                                                                                    "context": "route",
                                                                                    "element": "answer",
                                                                                    "variable": "answer"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "dosage",
                                                                                    "contextType": "variable",
                                                                                    "element": "route",
                                                                                    "variable": "route"
                                                                                }
                                                                            ],
                                                                            "rule": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "source": [
                                                                                        {
                                                                                            "context": "answer",
                                                                                            "element": "value",
                                                                                            "variable": "valueCoding",
                                                                                            "condition": "(ofType(Coding).exists())"
                                                                                        }
                                                                                    ],
                                                                                    "target": [
                                                                                        {
                                                                                            "context": "route",
                                                                                            "contextType": "variable",
                                                                                            "element": "coding",
                                                                                            "variable": "coding"
                                                                                        }
                                                                                    ],
                                                                                    "rule": [
                                                                                        {
                                                                                            "name": "75a474ecd14e46398dded2a45354be27",
                                                                                            "source": [
                                                                                                {
                                                                                                    "context": "valueCoding"
                                                                                                }
                                                                                            ],
                                                                                            "target": [
                                                                                                {
                                                                                                    "context": "coding",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "system",
                                                                                                    "transform": "evaluate",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "%valueCoding.system"
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "context": "coding",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "code",
                                                                                                    "transform": "evaluate",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "%valueCoding.code"
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "context": "coding",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "display",
                                                                                                    "transform": "evaluate",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "%valueCoding.display"
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "context": "route",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "text",
                                                                                                    "transform": "evaluate",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "%valueCoding.display"
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ],
                                                                    "documentation": "route -> MedicationRequest.dosageInstruction.route"
                                                                },
                                                                {
                                                                    "name": "item",
                                                                    "source": [
                                                                        {
                                                                            "context": "prescribedmedicationItem",
                                                                            "element": "item",
                                                                            "variable": "doseItem",
                                                                            "condition": "(linkId = 'medicationsummary-prescribedmedication-doseamount')"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "transform": "copy",
                                                                            "parameter": [
                                                                                {
                                                                                    "valueId": "medicationrequest"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ],
                                                                    "rule": [
                                                                        {
                                                                            "name": "answer",
                                                                            "source": [
                                                                                {
                                                                                    "context": "doseItem",
                                                                                    "element": "answer",
                                                                                    "variable": "answer"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "dosage",
                                                                                    "contextType": "variable",
                                                                                    "element": "doseAndRate",
                                                                                    "variable": "doseAndRate",
                                                                                    "listMode": [
                                                                                        "first"
                                                                                    ]
                                                                                }
                                                                            ],
                                                                            "rule": [
                                                                                {
                                                                                    "name": "9f27b8a046214d75b517c4c5dceb1f27",
                                                                                    "source": [
                                                                                        {
                                                                                            "context": "answer"
                                                                                        }
                                                                                    ],
                                                                                    "target": [
                                                                                        {
                                                                                            "context": "doseAndRate",
                                                                                            "contextType": "variable",
                                                                                            "element": "dose",
                                                                                            "variable": "doseQuantity",
                                                                                            "transform": "create",
                                                                                            "parameter": [
                                                                                                {
                                                                                                    "valueString": "Quantity"
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ],
                                                                                    "rule": [
                                                                                        {
                                                                                            "name": "c649d770a54f4903844119d0821e83d2",
                                                                                            "source": [
                                                                                                {
                                                                                                    "context": "answer"
                                                                                                }
                                                                                            ],
                                                                                            "target": [
                                                                                                {
                                                                                                    "context": "doseQuantity",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "value",
                                                                                                    "transform": "evaluate",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "%answer.value"
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "name": "item",
                                                                                            "source": [
                                                                                                {
                                                                                                    "context": "doseItem",
                                                                                                    "element": "item",
                                                                                                    "variable": "doseunitItem",
                                                                                                    "condition": "(linkId = 'medicationsummary-prescribedmedication-doseamount-unit')"
                                                                                                }
                                                                                            ],
                                                                                            "rule": [
                                                                                                {
                                                                                                    "name": "answer",
                                                                                                    "source": [
                                                                                                        {
                                                                                                            "context": "doseunitItem",
                                                                                                            "element": "answer",
                                                                                                            "variable": "unitAnswer"
                                                                                                        }
                                                                                                    ],
                                                                                                    "target": [
                                                                                                        {
                                                                                                            "context": "doseQuantity",
                                                                                                            "contextType": "variable",
                                                                                                            "element": "code",
                                                                                                            "transform": "evaluate",
                                                                                                            "parameter": [
                                                                                                                {
                                                                                                                    "valueString": "%unitAnswer.value.code"
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "context": "doseQuantity",
                                                                                                            "contextType": "variable",
                                                                                                            "element": "system",
                                                                                                            "transform": "evaluate",
                                                                                                            "parameter": [
                                                                                                                {
                                                                                                                    "valueString": "%unitAnswer.value.system"
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "context": "doseQuantity",
                                                                                                            "contextType": "variable",
                                                                                                            "element": "unit",
                                                                                                            "transform": "evaluate",
                                                                                                            "parameter": [
                                                                                                                {
                                                                                                                    "valueString": "%unitAnswer.value.display"
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ],
                                                                    "documentation": "dose amount -> MedicationRequest.dosageInstruction.doseAndRate"
                                                                },
                                                                {
                                                                    "name": "item",
                                                                    "source": [
                                                                        {
                                                                            "context": "prescribedmedicationItem",
                                                                            "element": "item",
                                                                            "variable": "dosetiming",
                                                                            "condition": "(linkId = 'medicationsummary-prescribedmedication-dosetiming')"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "transform": "copy",
                                                                            "parameter": [
                                                                                {
                                                                                    "valueId": "medicationrequest"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ],
                                                                    "rule": [
                                                                        {
                                                                            "name": "answer",
                                                                            "source": [
                                                                                {
                                                                                    "context": "dosetiming",
                                                                                    "element": "answer",
                                                                                    "variable": "answer"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "dosage",
                                                                                    "contextType": "variable",
                                                                                    "element": "timing",
                                                                                    "variable": "timing"
                                                                                }
                                                                            ],
                                                                            "rule": [
                                                                                {
                                                                                    "name": "77a0cfc23c8c4c4ab8a164b15e60a411",
                                                                                    "source": [
                                                                                        {
                                                                                            "context": "answer"
                                                                                        }
                                                                                    ],
                                                                                    "target": [
                                                                                        {
                                                                                            "context": "timing",
                                                                                            "contextType": "variable",
                                                                                            "element": "code",
                                                                                            "variable": "code"
                                                                                        }
                                                                                    ],
                                                                                    "rule": [
                                                                                        {
                                                                                            "name": "value",
                                                                                            "source": [
                                                                                                {
                                                                                                    "context": "answer",
                                                                                                    "element": "value",
                                                                                                    "variable": "valueCoding",
                                                                                                    "condition": "(ofType(Coding).exists())"
                                                                                                }
                                                                                            ],
                                                                                            "target": [
                                                                                                {
                                                                                                    "context": "code",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "coding",
                                                                                                    "variable": "codeCoding"
                                                                                                }
                                                                                            ],
                                                                                            "rule": [
                                                                                                {
                                                                                                    "name": "9c80f95657f444e1ab79e2c76779d929",
                                                                                                    "source": [
                                                                                                        {
                                                                                                            "context": "valueCoding"
                                                                                                        }
                                                                                                    ],
                                                                                                    "target": [
                                                                                                        {
                                                                                                            "context": "codeCoding",
                                                                                                            "contextType": "variable",
                                                                                                            "element": "system",
                                                                                                            "transform": "evaluate",
                                                                                                            "parameter": [
                                                                                                                {
                                                                                                                    "valueString": "%valueCoding.system"
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "context": "codeCoding",
                                                                                                            "contextType": "variable",
                                                                                                            "element": "code",
                                                                                                            "transform": "evaluate",
                                                                                                            "parameter": [
                                                                                                                {
                                                                                                                    "valueString": "%valueCoding.code"
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "context": "codeCoding",
                                                                                                            "contextType": "variable",
                                                                                                            "element": "display",
                                                                                                            "transform": "evaluate",
                                                                                                            "parameter": [
                                                                                                                {
                                                                                                                    "valueString": "%valueCoding.display"
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "context": "code",
                                                                                                            "contextType": "variable",
                                                                                                            "element": "text",
                                                                                                            "transform": "evaluate",
                                                                                                            "parameter": [
                                                                                                                {
                                                                                                                    "valueString": "%valueCoding.display"
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "name": "value",
                                                                                            "source": [
                                                                                                {
                                                                                                    "context": "answer",
                                                                                                    "element": "value",
                                                                                                    "variable": "valueString",
                                                                                                    "condition": "(ofType(String).exists())"
                                                                                                }
                                                                                            ],
                                                                                            "target": [
                                                                                                {
                                                                                                    "context": "code",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "text",
                                                                                                    "transform": "copy",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueId": "valueString"
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ],
                                                                    "documentation": "dose timing -> MedicationRequest.dosageInstruction.timing.code"
                                                                }
                                                            ],
                                                            "documentation": "dosage"
                                                        },
                                                        {
                                                            "name": "item",
                                                            "source": [
                                                                {
                                                                    "context": "prescribedmedicationItem",
                                                                    "element": "item",
                                                                    "variable": "indication",
                                                                    "condition": "(linkId = 'medicationsummary-prescribedmedication-reasoncode')"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "transform": "copy",
                                                                    "parameter": [
                                                                        {
                                                                            "valueId": "medicationrequest"
                                                                        }
                                                                    ]
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "answer",
                                                                    "source": [
                                                                        {
                                                                            "context": "indication",
                                                                            "element": "answer",
                                                                            "variable": "answer"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "context": "medicationrequest",
                                                                            "contextType": "variable",
                                                                            "element": "reasonCode",
                                                                            "variable": "reasoncode"
                                                                        }
                                                                    ],
                                                                    "rule": [
                                                                        {
                                                                            "name": "value",
                                                                            "source": [
                                                                                {
                                                                                    "context": "answer",
                                                                                    "element": "value",
                                                                                    "variable": "value"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "reasoncode",
                                                                                    "contextType": "variable",
                                                                                    "element": "coding",
                                                                                    "variable": "coding"
                                                                                }
                                                                            ],
                                                                            "rule": [
                                                                                {
                                                                                    "name": "2fc4a8a2d3db4884adc3bb9d3c18af44",
                                                                                    "source": [
                                                                                        {
                                                                                            "context": "value"
                                                                                        }
                                                                                    ],
                                                                                    "target": [
                                                                                        {
                                                                                            "context": "coding",
                                                                                            "contextType": "variable",
                                                                                            "element": "system",
                                                                                            "transform": "evaluate",
                                                                                            "parameter": [
                                                                                                {
                                                                                                    "valueString": "%value.system"
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "context": "coding",
                                                                                            "contextType": "variable",
                                                                                            "element": "code",
                                                                                            "transform": "evaluate",
                                                                                            "parameter": [
                                                                                                {
                                                                                                    "valueString": "%value.code"
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "context": "coding",
                                                                                            "contextType": "variable",
                                                                                            "element": "display",
                                                                                            "transform": "evaluate",
                                                                                            "parameter": [
                                                                                                {
                                                                                                    "valueString": "%value.display"
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "context": "reasoncode",
                                                                                            "contextType": "variable",
                                                                                            "element": "text",
                                                                                            "transform": "evaluate",
                                                                                            "parameter": [
                                                                                                {
                                                                                                    "valueString": "%value.display"
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ],
                                                            "documentation": "clinical indication -> MedicationRequest.reasonCode"
                                                        },
                                                        {
                                                            "name": "item",
                                                            "source": [
                                                                {
                                                                    "context": "prescribedmedicationItem",
                                                                    "element": "item",
                                                                    "variable": "comment",
                                                                    "condition": "(linkId = 'medicationsummary-prescribedmedication-comment')"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "medicationrequest",
                                                                    "contextType": "variable",
                                                                    "element": "note",
                                                                    "variable": "note"
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "answer",
                                                                    "source": [
                                                                        {
                                                                            "context": "comment",
                                                                            "element": "answer"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "context": "note",
                                                                            "contextType": "variable",
                                                                            "element": "text",
                                                                            "transform": "evaluate",
                                                                            "parameter": [
                                                                                {
                                                                                    "valueString": "%comment.answer.value"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ],
                                                            "documentation": "comment -> MedicationRequest.note"
                                                        },
                                                        {
                                                            "name": "item",
                                                            "source": [
                                                                {
                                                                    "context": "prescribedmedicationItem",
                                                                    "element": "item",
                                                                    "variable": "prescriptionDate",
                                                                    "condition": "(linkId = 'medicationsummary-prescribedmedication-date')"
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "answer",
                                                                    "source": [
                                                                        {
                                                                            "context": "prescriptionDate",
                                                                            "element": "answer",
                                                                            "variable": "answer"
                                                                        }
                                                                    ],
                                                                    "rule": [
                                                                        {
                                                                            "name": "value",
                                                                            "source": [
                                                                                {
                                                                                    "context": "answer",
                                                                                    "element": "value",
                                                                                    "variable": "adate",
                                                                                    "condition": "(ofType(dateTime).exists())"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "medicationrequest",
                                                                                    "contextType": "variable",
                                                                                    "element": "authoredOn",
                                                                                    "transform": "copy",
                                                                                    "parameter": [
                                                                                        {
                                                                                            "valueId": "adate"
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ],
                                                            "documentation": "prescriptionDate -> MedicationRequest.authoredOn"
                                                        },
                                                        {
                                                            "name": "f277e6cd6a0344d9bd5d8b3f291a8863",
                                                            "source": [
                                                                {
                                                                    "context": "prescribedmedicationItem"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "medicationrequest",
                                                                    "contextType": "variable",
                                                                    "element": "status",
                                                                    "transform": "copy",
                                                                    "parameter": [
                                                                        {
                                                                            "valueString": "completed"
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "context": "medicationrequest",
                                                                    "contextType": "variable",
                                                                    "element": "intent",
                                                                    "transform": "copy",
                                                                    "parameter": [
                                                                        {
                                                                            "valueString": "order"
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "name": "subject",
                                                            "source": [
                                                                {
                                                                    "context": "src",
                                                                    "element": "subject"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "medicationrequest",
                                                                    "contextType": "variable",
                                                                    "element": "subject",
                                                                    "transform": "evaluate",
                                                                    "parameter": [
                                                                        {
                                                                            "valueString": "%src.subject"
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "name": "author",
                                                            "source": [
                                                                {
                                                                    "context": "src",
                                                                    "element": "author",
                                                                    "variable": "author"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "medicationrequest",
                                                                    "contextType": "variable",
                                                                    "element": "requester",
                                                                    "transform": "evaluate",
                                                                    "parameter": [
                                                                        {
                                                                            "valueString": "%author"
                                                                        }
                                                                    ]
                                                                }
                                                            ],
                                                            "documentation": "requester"
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ],
                                    "documentation": "Prescribed medication"
                                }
                            ],
                            "documentation": "Medication Summary"
                        },
                        {
                            "name": "item",
                            "source": [
                                {
                                    "context": "tabContainer",
                                    "element": "item",
                                    "variable": "immunizationsItem",
                                    "condition": "(linkId = 'immunizations')"
                                }
                            ],
                            "rule": [
                                {
                                    "name": "item",
                                    "source": [
                                        {
                                            "context": "immunizationsItem",
                                            "element": "item",
                                            "variable": "vaccinationadministeredeventItem",
                                            "condition": "(linkId = 'immunizations-vaccinationadministeredevent')"
                                        }
                                    ],
                                    "target": [
                                        {
                                            "context": "bundle",
                                            "contextType": "variable",
                                            "element": "entry",
                                            "variable": "entry"
                                        }
                                    ],
                                    "rule": [
                                        {
                                            "name": "dc4e79711a9e44109aa0ecd8b640fd54",
                                            "source": [
                                                {
                                                    "context": "vaccinationadministeredeventItem",
                                                    "condition": "(item.where(linkId = 'immunizations-vaccinationadministeredevent-id').exists().not())"
                                                }
                                            ],
                                            "target": [
                                                {
                                                    "context": "entry",
                                                    "contextType": "variable",
                                                    "element": "request",
                                                    "variable": "request"
                                                }
                                            ],
                                            "rule": [
                                                {
                                                    "name": "942f4f40cdb249ce960ae8c254bdbec7",
                                                    "source": [
                                                        {
                                                            "context": "vaccinationadministeredeventItem"
                                                        }
                                                    ],
                                                    "target": [
                                                        {
                                                            "context": "entry",
                                                            "contextType": "variable",
                                                            "element": "fullUrl",
                                                            "variable": "uuid",
                                                            "transform": "uuid"
                                                        },
                                                        {
                                                            "context": "entry",
                                                            "contextType": "variable",
                                                            "element": "fullUrl",
                                                            "transform": "append",
                                                            "parameter": [
                                                                {
                                                                    "valueString": "urn:uuid:"
                                                                },
                                                                {
                                                                    "valueId": "uuid"
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "context": "request",
                                                            "contextType": "variable",
                                                            "element": "method",
                                                            "transform": "copy",
                                                            "parameter": [
                                                                {
                                                                    "valueString": "POST"
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "context": "entry",
                                                            "contextType": "variable",
                                                            "element": "resource",
                                                            "variable": "immunization",
                                                            "transform": "create",
                                                            "parameter": [
                                                                {
                                                                    "valueString": "Immunization"
                                                                }
                                                            ]
                                                        }
                                                    ],
                                                    "rule": [
                                                        {
                                                            "name": "595d6f93186547ee97b7c85d0f0db770",
                                                            "source": [
                                                                {
                                                                    "context": "vaccinationadministeredeventItem"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "immunization",
                                                                    "contextType": "variable",
                                                                    "element": "meta",
                                                                    "variable": "meta"
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "3178e9516bdb43fb852f0845c36d2da7",
                                                                    "source": [
                                                                        {
                                                                            "context": "vaccinationadministeredeventItem"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "context": "meta",
                                                                            "contextType": "variable",
                                                                            "element": "profile",
                                                                            "transform": "copy",
                                                                            "parameter": [
                                                                                {
                                                                                    "valueString": "http://hl7.org.au/fhir/core/StructureDefinition/au-core-immunization"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "name": "item",
                                                            "source": [
                                                                {
                                                                    "context": "vaccinationadministeredeventItem",
                                                                    "element": "item",
                                                                    "variable": "nameItem",
                                                                    "condition": "(linkId = 'immunizations-vaccinationadministeredevent-name')"
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "answer",
                                                                    "source": [
                                                                        {
                                                                            "context": "nameItem",
                                                                            "element": "answer"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "context": "immunization",
                                                                            "contextType": "variable",
                                                                            "element": "vaccineCode",
                                                                            "variable": "code"
                                                                        }
                                                                    ],
                                                                    "rule": [
                                                                        {
                                                                            "name": "answer",
                                                                            "source": [
                                                                                {
                                                                                    "context": "nameItem",
                                                                                    "element": "answer",
                                                                                    "variable": "answer"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "code",
                                                                                    "contextType": "variable",
                                                                                    "element": "coding",
                                                                                    "transform": "evaluate",
                                                                                    "parameter": [
                                                                                        {
                                                                                            "valueString": "%answer.value"
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "name": "answer",
                                                                            "source": [
                                                                                {
                                                                                    "context": "nameItem",
                                                                                    "element": "answer",
                                                                                    "variable": "answer"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "code",
                                                                                    "contextType": "variable",
                                                                                    "element": "text",
                                                                                    "transform": "evaluate",
                                                                                    "parameter": [
                                                                                        {
                                                                                            "valueString": "%answer.value.display"
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "name": "item",
                                                            "source": [
                                                                {
                                                                    "context": "vaccinationadministeredeventItem",
                                                                    "element": "item",
                                                                    "variable": "sequenceItem",
                                                                    "condition": "(linkId = 'immunizations-vaccinationadministeredevent-sequence')"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "immunization",
                                                                    "contextType": "variable",
                                                                    "element": "protocolApplied",
                                                                    "variable": "protocolApplied"
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "answer",
                                                                    "source": [
                                                                        {
                                                                            "context": "sequenceItem",
                                                                            "element": "answer",
                                                                            "variable": "answer"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "context": "protocolApplied",
                                                                            "contextType": "variable",
                                                                            "element": "doseNumber",
                                                                            "transform": "evaluate",
                                                                            "parameter": [
                                                                                {
                                                                                    "valueString": "%answer.value"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ],
                                                            "documentation": "immunizations-vaccinationadministeredevent-sequence"
                                                        },
                                                        {
                                                            "name": "item",
                                                            "source": [
                                                                {
                                                                    "context": "vaccinationadministeredeventItem",
                                                                    "element": "item",
                                                                    "variable": "administrationDate",
                                                                    "condition": "(linkId = 'immunizations-vaccinationadministeredevent-administrationDate')"
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "answer",
                                                                    "source": [
                                                                        {
                                                                            "context": "administrationDate",
                                                                            "element": "answer",
                                                                            "variable": "answer"
                                                                        }
                                                                    ],
                                                                    "rule": [
                                                                        {
                                                                            "name": "value",
                                                                            "source": [
                                                                                {
                                                                                    "context": "answer",
                                                                                    "element": "value",
                                                                                    "variable": "adate",
                                                                                    "condition": "(ofType(date).exists())"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "immunization",
                                                                                    "contextType": "variable",
                                                                                    "element": "occurrence",
                                                                                    "transform": "cast",
                                                                                    "parameter": [
                                                                                        {
                                                                                            "valueId": "adate"
                                                                                        },
                                                                                        {
                                                                                            "valueString": "dateTime"
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ],
                                                                            "documentation": "this causes an error in Smart Forms $extract"
                                                                        },
                                                                        {
                                                                            "name": "value",
                                                                            "source": [
                                                                                {
                                                                                    "context": "answer",
                                                                                    "element": "value",
                                                                                    "variable": "adate",
                                                                                    "condition": "(ofType(dateTime).exists())"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "immunization",
                                                                                    "contextType": "variable",
                                                                                    "element": "occurrence",
                                                                                    "transform": "copy",
                                                                                    "parameter": [
                                                                                        {
                                                                                            "valueId": "adate"
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ],
                                                                            "documentation": "changed questionnaire to use dateTime rather than date"
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "name": "item",
                                                            "source": [
                                                                {
                                                                    "context": "vaccinationadministeredeventItem",
                                                                    "element": "item",
                                                                    "variable": "comment",
                                                                    "condition": "(linkId = 'immunizations-vaccinationadministeredevent-comment')"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "immunization",
                                                                    "contextType": "variable",
                                                                    "element": "note",
                                                                    "variable": "note"
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "answer",
                                                                    "source": [
                                                                        {
                                                                            "context": "comment",
                                                                            "element": "answer",
                                                                            "variable": "answer"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "context": "note",
                                                                            "contextType": "variable",
                                                                            "element": "text",
                                                                            "transform": "evaluate",
                                                                            "parameter": [
                                                                                {
                                                                                    "valueString": "%answer.value"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "name": "2b270ffac3984e139d662433935252d6",
                                                            "source": [
                                                                {
                                                                    "context": "vaccinationadministeredeventItem"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "immunization",
                                                                    "contextType": "variable",
                                                                    "element": "status",
                                                                    "transform": "copy",
                                                                    "parameter": [
                                                                        {
                                                                            "valueString": "completed"
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "name": "subject",
                                                            "source": [
                                                                {
                                                                    "context": "src",
                                                                    "element": "subject"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "immunization",
                                                                    "contextType": "variable",
                                                                    "element": "patient",
                                                                    "transform": "evaluate",
                                                                    "parameter": [
                                                                        {
                                                                            "valueString": "%src.subject"
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ],
                            "documentation": "Immunizations"
                        }
                    ]
                }
            ]
        }
    ]
}