{
    "resourceType": "StructureMap",
    "id": "AUPatientSummaryExtract",
    "url": "https://smartforms.csiro.au/ig/StructureMap/AUPatientSummaryExtract",
    "name": "AUPatientSummaryExtract",
    "status": "draft",
    "structure": [
        {
            "url": "http://hl7.org/fhir/StructureDefinition/QuestionnaireResponse",
            "mode": "source"
        },
        {
            "url": "http://hl7.org/fhir/StructureDefinition/Bundle",
            "mode": "target"
        }
    ],
    "group": [
        {
            "name": "bundleMap",
            "typeMode": "none",
            "input": [
                {
                    "name": "src",
                    "type": "QuestionnaireResponse",
                    "mode": "source"
                },
                {
                    "name": "bundle",
                    "type": "Bundle",
                    "mode": "target"
                }
            ],
            "rule": [
                {
                    "name": "item",
                    "source": [
                        {
                            "context": "src",
                            "element": "item"
                        }
                    ],
                    "target": [
                        {
                            "context": "bundle",
                            "contextType": "variable",
                            "element": "type",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "transaction"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "item",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "tabContainer"
                        }
                    ],
                    "rule": [
                        {
                            "name": "item",
                            "source": [
                                {
                                    "context": "tabContainer",
                                    "element": "item",
                                    "variable": "problemsItem",
                                    "condition": "(linkId = 'problems')"
                                }
                            ],
                            "rule": [
                                {
                                    "name": "item",
                                    "source": [
                                        {
                                            "context": "problemsItem",
                                            "element": "item",
                                            "variable": "problemdiagnosissummaryItem",
                                            "condition": "(linkId = 'problems-problemdiagnosissummary')"
                                        }
                                    ],
                                    "target": [
                                        {
                                            "context": "bundle",
                                            "contextType": "variable",
                                            "element": "entry",
                                            "variable": "entry"
                                        }
                                    ],
                                    "rule": [
                                        {
                                            "name": "706e8a5e342447e5bab3ad1bb7f40d5e",
                                            "source": [
                                                {
                                                    "context": "problemsItem",
                                                    "condition": "(item.where(linkId = 'problems-problemdiagnosissummary-id').exists().not())"
                                                }
                                            ],
                                            "target": [
                                                {
                                                    "context": "entry",
                                                    "contextType": "variable",
                                                    "element": "request",
                                                    "variable": "request"
                                                }
                                            ],
                                            "rule": [
                                                {
                                                    "name": "9952995ea7284a6a9c3de17973cb3cf4",
                                                    "source": [
                                                        {
                                                            "context": "problemdiagnosissummaryItem"
                                                        }
                                                    ],
                                                    "target": [
                                                        {
                                                            "context": "entry",
                                                            "contextType": "variable",
                                                            "element": "fullUrl",
                                                            "variable": "uuid",
                                                            "transform": "uuid"
                                                        },
                                                        {
                                                            "context": "entry",
                                                            "contextType": "variable",
                                                            "element": "fullUrl",
                                                            "transform": "append",
                                                            "parameter": [
                                                                {
                                                                    "valueString": "urn:uuid:"
                                                                },
                                                                {
                                                                    "valueId": "uuid"
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "context": "request",
                                                            "contextType": "variable",
                                                            "element": "method",
                                                            "transform": "copy",
                                                            "parameter": [
                                                                {
                                                                    "valueString": "POST"
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "name": "b86169341515418993e0dd8fe5ac5584",
                                                    "source": [
                                                        {
                                                            "context": "problemdiagnosissummaryItem"
                                                        }
                                                    ],
                                                    "target": [
                                                        {
                                                            "context": "entry",
                                                            "contextType": "variable",
                                                            "element": "resource",
                                                            "variable": "condition",
                                                            "transform": "create",
                                                            "parameter": [
                                                                {
                                                                    "valueString": "Condition"
                                                                }
                                                            ]
                                                        }
                                                    ],
                                                    "rule": [
                                                        {
                                                            "name": "21ccb940503c42dd942bbe4440d46e37",
                                                            "source": [
                                                                {
                                                                    "context": "problemdiagnosissummaryItem"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "condition",
                                                                    "contextType": "variable",
                                                                    "element": "meta",
                                                                    "variable": "meta"
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "5b8ba448d3bd4cabaef09a8253bddd4b",
                                                                    "source": [
                                                                        {
                                                                            "context": "problemdiagnosissummaryItem"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "context": "meta",
                                                                            "contextType": "variable",
                                                                            "element": "profile",
                                                                            "transform": "copy",
                                                                            "parameter": [
                                                                                {
                                                                                    "valueString": "http://hl7.org.au/fhir/core/StructureDefinition/au-core-condition"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "name": "item",
                                                            "source": [
                                                                {
                                                                    "context": "problemdiagnosissummaryItem",
                                                                    "element": "item",
                                                                    "variable": "problemNameItem",
                                                                    "condition": "(linkId = 'problems-problemdiagnosissummary-name')"
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "answer",
                                                                    "source": [
                                                                        {
                                                                            "context": "problemNameItem",
                                                                            "element": "answer",
                                                                            "listMode": "first",
                                                                            "variable": "answer"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "context": "condition",
                                                                            "contextType": "variable",
                                                                            "element": "code",
                                                                            "variable": "code"
                                                                        }
                                                                    ],
                                                                    "rule": [
                                                                        {
                                                                            "name": "b248e4e96a30438aa78abcb3385329f0",
                                                                            "source": [
                                                                                {
                                                                                    "context": "answer"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "code",
                                                                                    "contextType": "variable",
                                                                                    "element": "coding",
                                                                                    "transform": "evaluate",
                                                                                    "parameter": [
                                                                                        {
                                                                                            "valueString": "%answer.value"
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "name": "1564a2df5f484ff5affc465fd79da154",
                                                                            "source": [
                                                                                {
                                                                                    "context": "answer"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "code",
                                                                                    "contextType": "variable",
                                                                                    "element": "text",
                                                                                    "transform": "evaluate",
                                                                                    "parameter": [
                                                                                        {
                                                                                            "valueString": "%answer.value.display"
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "name": "item",
                                                            "source": [
                                                                {
                                                                    "context": "problemdiagnosissummaryItem",
                                                                    "element": "item",
                                                                    "variable": "problemBodysiteItem",
                                                                    "condition": "(linkId = 'problems-problemdiagnosissummary-bodysite')"
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "answer",
                                                                    "source": [
                                                                        {
                                                                            "context": "problemBodysiteItem",
                                                                            "element": "answer",
                                                                            "listMode": "first",
                                                                            "variable": "answer"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "context": "condition",
                                                                            "contextType": "variable",
                                                                            "element": "bodySite",
                                                                            "variable": "bodySite"
                                                                        }
                                                                    ],
                                                                    "rule": [
                                                                        {
                                                                            "name": "fa7016faba3e4c88bdfe68674e87ced6",
                                                                            "source": [
                                                                                {
                                                                                    "context": "answer"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "bodySite",
                                                                                    "contextType": "variable",
                                                                                    "element": "coding",
                                                                                    "transform": "evaluate",
                                                                                    "parameter": [
                                                                                        {
                                                                                            "valueString": "%answer.value"
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "name": "41fe1d7d42314b1f88635374eb1068c8",
                                                                            "source": [
                                                                                {
                                                                                    "context": "answer"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "bodySite",
                                                                                    "contextType": "variable",
                                                                                    "element": "text",
                                                                                    "transform": "evaluate",
                                                                                    "parameter": [
                                                                                        {
                                                                                            "valueString": "%answer.value.display"
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "name": "item",
                                                            "source": [
                                                                {
                                                                    "context": "problemdiagnosissummaryItem",
                                                                    "element": "item",
                                                                    "variable": "problemStatusItem",
                                                                    "condition": "(linkId = 'problems-problemdiagnosissummary-status')"
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "answer",
                                                                    "source": [
                                                                        {
                                                                            "context": "problemStatusItem",
                                                                            "element": "answer",
                                                                            "listMode": "first",
                                                                            "variable": "answer"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "context": "condition",
                                                                            "contextType": "variable",
                                                                            "element": "clinicalStatus",
                                                                            "variable": "clinicalStatus"
                                                                        }
                                                                    ],
                                                                    "rule": [
                                                                        {
                                                                            "name": "4426d6d743e1477394dbf02238c89fa8",
                                                                            "source": [
                                                                                {
                                                                                    "context": "answer"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "clinicalStatus",
                                                                                    "contextType": "variable",
                                                                                    "element": "coding",
                                                                                    "transform": "evaluate",
                                                                                    "parameter": [
                                                                                        {
                                                                                            "valueString": "%answer.value"
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "name": "62083f6e054d4df3ab9b02f4be76edc8",
                                                                            "source": [
                                                                                {
                                                                                    "context": "answer"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "clinicalStatus",
                                                                                    "contextType": "variable",
                                                                                    "element": "text",
                                                                                    "transform": "evaluate",
                                                                                    "parameter": [
                                                                                        {
                                                                                            "valueString": "%answer.value.display"
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "name": "item",
                                                            "source": [
                                                                {
                                                                    "context": "problemdiagnosissummaryItem",
                                                                    "element": "item",
                                                                    "variable": "problemCommentItem",
                                                                    "condition": "(linkId = 'problems-problemdiagnosissummary-comment')"
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "answer",
                                                                    "source": [
                                                                        {
                                                                            "context": "problemCommentItem",
                                                                            "element": "answer",
                                                                            "listMode": "first",
                                                                            "variable": "answer"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "context": "condition",
                                                                            "contextType": "variable",
                                                                            "element": "note",
                                                                            "variable": "note"
                                                                        }
                                                                    ],
                                                                    "rule": [
                                                                        {
                                                                            "name": "4f092e1a0e0c4803b74d506473f43302",
                                                                            "source": [
                                                                                {
                                                                                    "context": "answer"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "note",
                                                                                    "contextType": "variable",
                                                                                    "element": "text",
                                                                                    "transform": "evaluate",
                                                                                    "parameter": [
                                                                                        {
                                                                                            "valueString": "%answer.value"
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "name": "29b8067845be4ab48a3e6cdbc8e28520",
                                                            "source": [
                                                                {
                                                                    "context": "problemdiagnosissummaryItem"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "condition",
                                                                    "contextType": "variable",
                                                                    "element": "category",
                                                                    "variable": "category",
                                                                    "transform": "cc",
                                                                    "parameter": [
                                                                        {
                                                                            "valueString": "http://terminology.hl7.org/CodeSystem/condition-category"
                                                                        },
                                                                        {
                                                                            "valueString": "problem-list-item"
                                                                        }
                                                                    ]
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "cd2505dbd49d4bab8d104fbe7dc3c77c",
                                                                    "source": [
                                                                        {
                                                                            "context": "problemdiagnosissummaryItem"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "context": "category",
                                                                            "contextType": "variable",
                                                                            "element": "text",
                                                                            "transform": "copy",
                                                                            "parameter": [
                                                                                {
                                                                                    "valueString": "Problem"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "name": "subject",
                                                            "source": [
                                                                {
                                                                    "context": "src",
                                                                    "element": "subject",
                                                                    "variable": "subject"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "condition",
                                                                    "contextType": "variable",
                                                                    "element": "subject",
                                                                    "transform": "copy",
                                                                    "parameter": [
                                                                        {
                                                                            "valueId": "subject"
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ],
                            "documentation": "Problems"
                        },
                        {
                            "name": "item",
                            "source": [
                                {
                                    "context": "tabContainer",
                                    "element": "item",
                                    "variable": "allergyintolerancesItem",
                                    "condition": "(linkId = 'allergyintolerances')"
                                }
                            ],
                            "rule": [
                                {
                                    "name": "item",
                                    "source": [
                                        {
                                            "context": "allergyintolerancesItem",
                                            "element": "item",
                                            "variable": "adverseReactionItem",
                                            "condition": "(linkId = 'allergyintolerances-adversereactionrisksummary')"
                                        }
                                    ],
                                    "target": [
                                        {
                                            "context": "bundle",
                                            "contextType": "variable",
                                            "element": "entry",
                                            "variable": "entry"
                                        }
                                    ],
                                    "rule": [
                                        {
                                            "name": "47a0b44b81574e92be50e7b228ecf21b",
                                            "source": [
                                                {
                                                    "context": "adverseReactionItem",
                                                    "condition": "(item.where(linkId = 'allergyintolerances-adversereactionrisksummary-id').exists().not())"
                                                }
                                            ],
                                            "target": [
                                                {
                                                    "context": "entry",
                                                    "contextType": "variable",
                                                    "element": "request",
                                                    "variable": "request"
                                                }
                                            ],
                                            "rule": [
                                                {
                                                    "name": "c952f1fb2f384867a4b612a972621735",
                                                    "source": [
                                                        {
                                                            "context": "adverseReactionItem"
                                                        }
                                                    ],
                                                    "target": [
                                                        {
                                                            "context": "entry",
                                                            "contextType": "variable",
                                                            "element": "fullUrl",
                                                            "variable": "uuid",
                                                            "transform": "uuid"
                                                        },
                                                        {
                                                            "context": "entry",
                                                            "contextType": "variable",
                                                            "element": "fullUrl",
                                                            "transform": "append",
                                                            "parameter": [
                                                                {
                                                                    "valueString": "urn:uuid:"
                                                                },
                                                                {
                                                                    "valueId": "uuid"
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "context": "request",
                                                            "contextType": "variable",
                                                            "element": "method",
                                                            "transform": "copy",
                                                            "parameter": [
                                                                {
                                                                    "valueString": "POST"
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "name": "f9ce3cbbd8ca4d3ca5cd255a16327bab",
                                                    "source": [
                                                        {
                                                            "context": "adverseReactionItem"
                                                        }
                                                    ],
                                                    "target": [
                                                        {
                                                            "context": "entry",
                                                            "contextType": "variable",
                                                            "element": "resource",
                                                            "variable": "allergy",
                                                            "transform": "create",
                                                            "parameter": [
                                                                {
                                                                    "valueString": "AllergyIntolerance"
                                                                }
                                                            ]
                                                        }
                                                    ],
                                                    "rule": [
                                                        {
                                                            "name": "f541921f9b9943cfa7ad1fd44c6e94e7",
                                                            "source": [
                                                                {
                                                                    "context": "adverseReactionItem"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "allergy",
                                                                    "contextType": "variable",
                                                                    "element": "meta",
                                                                    "variable": "meta"
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "dc783a32e08d45eb8664f73180c16ebc",
                                                                    "source": [
                                                                        {
                                                                            "context": "adverseReactionItem"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "context": "meta",
                                                                            "contextType": "variable",
                                                                            "element": "profile",
                                                                            "transform": "copy",
                                                                            "parameter": [
                                                                                {
                                                                                    "valueString": "http://hl7.org.au/fhir/core/StructureDefinition/au-core-allergyintolerance"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "name": "item",
                                                            "source": [
                                                                {
                                                                    "context": "adverseReactionItem",
                                                                    "element": "item",
                                                                    "variable": "substanceItem",
                                                                    "condition": "(linkId = 'allergyintolerances-adversereactionrisksummary-substance')"
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "answer",
                                                                    "source": [
                                                                        {
                                                                            "context": "substanceItem",
                                                                            "element": "answer"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "context": "allergy",
                                                                            "contextType": "variable",
                                                                            "element": "code",
                                                                            "variable": "code"
                                                                        }
                                                                    ],
                                                                    "rule": [
                                                                        {
                                                                            "name": "answer",
                                                                            "source": [
                                                                                {
                                                                                    "context": "substanceItem",
                                                                                    "element": "answer"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "code",
                                                                                    "contextType": "variable",
                                                                                    "element": "coding",
                                                                                    "transform": "evaluate",
                                                                                    "parameter": [
                                                                                        {
                                                                                            "valueString": "%substanceItem.answer.value"
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "name": "answer",
                                                                            "source": [
                                                                                {
                                                                                    "context": "substanceItem",
                                                                                    "element": "answer"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "code",
                                                                                    "contextType": "variable",
                                                                                    "element": "text",
                                                                                    "transform": "evaluate",
                                                                                    "parameter": [
                                                                                        {
                                                                                            "valueString": "%substanceItem.answer.value.display"
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "name": "item",
                                                            "source": [
                                                                {
                                                                    "context": "adverseReactionItem",
                                                                    "element": "item",
                                                                    "variable": "manifestationItem",
                                                                    "condition": "(linkId = 'allergyintolerances-adversereactionrisksummary-manifestation')"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "allergy",
                                                                    "contextType": "variable",
                                                                    "element": "reaction",
                                                                    "variable": "reaction"
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "answer",
                                                                    "source": [
                                                                        {
                                                                            "context": "manifestationItem",
                                                                            "element": "answer",
                                                                            "variable": "manifestationItemAnswer"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "context": "reaction",
                                                                            "contextType": "variable",
                                                                            "element": "manifestation",
                                                                            "variable": "manifestation"
                                                                        }
                                                                    ],
                                                                    "rule": [
                                                                        {
                                                                            "name": "value",
                                                                            "source": [
                                                                                {
                                                                                    "context": "manifestationItemAnswer",
                                                                                    "element": "value",
                                                                                    "variable": "manifestationItemAnswerValue"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "manifestation",
                                                                                    "contextType": "variable",
                                                                                    "element": "coding",
                                                                                    "transform": "copy",
                                                                                    "parameter": [
                                                                                        {
                                                                                            "valueId": "manifestationItemAnswerValue"
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ],
                                                                            "rule": [
                                                                                {
                                                                                    "name": "display",
                                                                                    "source": [
                                                                                        {
                                                                                            "context": "manifestationItemAnswerValue",
                                                                                            "element": "display",
                                                                                            "variable": "manifestationItemAnswerValueDisplay"
                                                                                        }
                                                                                    ],
                                                                                    "target": [
                                                                                        {
                                                                                            "context": "manifestation",
                                                                                            "contextType": "variable",
                                                                                            "element": "text",
                                                                                            "transform": "copy",
                                                                                            "parameter": [
                                                                                                {
                                                                                                    "valueId": "manifestationItemAnswerValueDisplay"
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "name": "item",
                                                            "source": [
                                                                {
                                                                    "context": "adverseReactionItem",
                                                                    "element": "item",
                                                                    "variable": "comment",
                                                                    "condition": "(linkId = 'allergyintolerances-adversereactionrisksummary-comment')"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "allergy",
                                                                    "contextType": "variable",
                                                                    "element": "note",
                                                                    "variable": "note"
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "answer",
                                                                    "source": [
                                                                        {
                                                                            "context": "comment",
                                                                            "element": "answer"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "context": "note",
                                                                            "contextType": "variable",
                                                                            "element": "text",
                                                                            "transform": "evaluate",
                                                                            "parameter": [
                                                                                {
                                                                                    "valueString": "%comment.answer.value"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "name": "3e035827dc674211999b88cac36f0676",
                                                            "source": [
                                                                {
                                                                    "context": "adverseReactionItem"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "allergy",
                                                                    "contextType": "variable",
                                                                    "element": "clinicalStatus",
                                                                    "transform": "cc",
                                                                    "parameter": [
                                                                        {
                                                                            "valueString": "http://terminology.hl7.org/CodeSystem/allergyintolerance-clinical"
                                                                        },
                                                                        {
                                                                            "valueString": "active"
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "name": "subject",
                                                            "source": [
                                                                {
                                                                    "context": "src",
                                                                    "element": "subject"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "allergy",
                                                                    "contextType": "variable",
                                                                    "element": "patient",
                                                                    "transform": "evaluate",
                                                                    "parameter": [
                                                                        {
                                                                            "valueString": "%src.subject"
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ],
                            "documentation": "Allergies and Intolerances"
                        },
                        {
                            "name": "item",
                            "source": [
                                {
                                    "context": "tabContainer",
                                    "element": "item",
                                    "variable": "medicationsummaryItem",
                                    "condition": "(linkId = 'medicationsummary')"
                                }
                            ],
                            "rule": [
                                {
                                    "name": "item",
                                    "source": [
                                        {
                                            "context": "medicationsummaryItem",
                                            "element": "item",
                                            "variable": "medicationusestatementItem",
                                            "condition": "(linkId = 'medicationsummary-medicationusestatement')"
                                        }
                                    ],
                                    "target": [
                                        {
                                            "context": "bundle",
                                            "contextType": "variable",
                                            "element": "entry",
                                            "variable": "entry"
                                        }
                                    ],
                                    "rule": [
                                        {
                                            "name": "46952cbb93f041c6842d931aba529b6e",
                                            "source": [
                                                {
                                                    "context": "medicationusestatementItem",
                                                    "condition": "(item.where(linkId = 'medicationsummary-medicationusestatement-id').exists().not())"
                                                }
                                            ],
                                            "target": [
                                                {
                                                    "context": "entry",
                                                    "contextType": "variable",
                                                    "element": "request",
                                                    "variable": "request"
                                                }
                                            ],
                                            "rule": [
                                                {
                                                    "name": "a283b19c01284395b906cf8f7b552cbc",
                                                    "source": [
                                                        {
                                                            "context": "medicationusestatementItem"
                                                        }
                                                    ],
                                                    "target": [
                                                        {
                                                            "context": "entry",
                                                            "contextType": "variable",
                                                            "element": "fullUrl",
                                                            "variable": "uuid",
                                                            "transform": "uuid"
                                                        },
                                                        {
                                                            "context": "entry",
                                                            "contextType": "variable",
                                                            "element": "fullUrl",
                                                            "transform": "append",
                                                            "parameter": [
                                                                {
                                                                    "valueString": "urn:uuid:"
                                                                },
                                                                {
                                                                    "valueId": "uuid"
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "context": "request",
                                                            "contextType": "variable",
                                                            "element": "method",
                                                            "transform": "copy",
                                                            "parameter": [
                                                                {
                                                                    "valueString": "POST"
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "name": "667ca75bd81343d1bfe5f683217fa436",
                                                    "source": [
                                                        {
                                                            "context": "medicationusestatementItem"
                                                        }
                                                    ],
                                                    "target": [
                                                        {
                                                            "context": "entry",
                                                            "contextType": "variable",
                                                            "element": "resource",
                                                            "variable": "medicationstatement",
                                                            "transform": "create",
                                                            "parameter": [
                                                                {
                                                                    "valueString": "MedicationStatement"
                                                                }
                                                            ]
                                                        }
                                                    ],
                                                    "rule": [
                                                        {
                                                            "name": "25504c7c127b4980bfd66b7c80426b5d",
                                                            "source": [
                                                                {
                                                                    "context": "medicationusestatementItem"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "medicationstatement",
                                                                    "contextType": "variable",
                                                                    "element": "meta",
                                                                    "variable": "meta"
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "b36714f9e8234fe887d0f1cc62464196",
                                                                    "source": [
                                                                        {
                                                                            "context": "medicationusestatementItem"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "context": "meta",
                                                                            "contextType": "variable",
                                                                            "element": "profile",
                                                                            "transform": "copy",
                                                                            "parameter": [
                                                                                {
                                                                                    "valueString": "http://hl7.org.au/fhir/StructureDefinition/au-medicationstatement"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "name": "949b314e8036440396fc17f6760ff71c",
                                                            "source": [
                                                                {
                                                                    "context": "medicationusestatementItem"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "medicationstatement",
                                                                    "contextType": "variable",
                                                                    "element": "contained",
                                                                    "variable": "medication",
                                                                    "transform": "create",
                                                                    "parameter": [
                                                                        {
                                                                            "valueString": "Medication"
                                                                        }
                                                                    ]
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "213ce727673d40e08627a057b072fba8",
                                                                    "source": [
                                                                        {
                                                                            "context": "medicationusestatementItem"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "context": "medication",
                                                                            "contextType": "variable",
                                                                            "element": "id",
                                                                            "transform": "copy",
                                                                            "parameter": [
                                                                                {
                                                                                    "valueString": "medication"
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "context": "medication",
                                                                            "contextType": "variable",
                                                                            "element": "meta",
                                                                            "variable": "meta"
                                                                        }
                                                                    ],
                                                                    "rule": [
                                                                        {
                                                                            "name": "586b7be23ade4fed83fc7ff8233e9a90",
                                                                            "source": [
                                                                                {
                                                                                    "context": "medicationusestatementItem"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "meta",
                                                                                    "contextType": "variable",
                                                                                    "element": "profile",
                                                                                    "transform": "copy",
                                                                                    "parameter": [
                                                                                        {
                                                                                            "valueString": "http://hl7.org.au/fhir/core/StructureDefinition/au-core-medication"
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "name": "item",
                                                                    "source": [
                                                                        {
                                                                            "context": "medicationusestatementItem",
                                                                            "element": "item",
                                                                            "variable": "nameItem",
                                                                            "condition": "(linkId = 'medicationsummary-medicationusestatement-name')"
                                                                        }
                                                                    ],
                                                                    "rule": [
                                                                        {
                                                                            "name": "answer",
                                                                            "source": [
                                                                                {
                                                                                    "context": "nameItem",
                                                                                    "element": "answer",
                                                                                    "variable": "answer"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "medication",
                                                                                    "contextType": "variable",
                                                                                    "element": "code",
                                                                                    "variable": "code"
                                                                                }
                                                                            ],
                                                                            "rule": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "source": [
                                                                                        {
                                                                                            "context": "answer",
                                                                                            "element": "value",
                                                                                            "variable": "valueCoding",
                                                                                            "condition": "(ofType(Coding).exists())"
                                                                                        }
                                                                                    ],
                                                                                    "target": [
                                                                                        {
                                                                                            "context": "code",
                                                                                            "contextType": "variable",
                                                                                            "element": "coding",
                                                                                            "variable": "coding",
                                                                                            "listMode": [
                                                                                                "first"
                                                                                            ]
                                                                                        }
                                                                                    ],
                                                                                    "rule": [
                                                                                        {
                                                                                            "name": "232c72d3aac34e73af0c3bdd25292bc3",
                                                                                            "source": [
                                                                                                {
                                                                                                    "context": "valueCoding"
                                                                                                }
                                                                                            ],
                                                                                            "target": [
                                                                                                {
                                                                                                    "context": "coding",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "system",
                                                                                                    "transform": "evaluate",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "%valueCoding.system"
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "context": "coding",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "code",
                                                                                                    "transform": "evaluate",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "%valueCoding.code"
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "context": "coding",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "display",
                                                                                                    "transform": "evaluate",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "%valueCoding.display"
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "context": "code",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "text",
                                                                                                    "transform": "evaluate",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "%valueCoding.display"
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ],
                                                                    "documentation": "name -> MedicationStatement.contained:medication.code"
                                                                },
                                                                {
                                                                    "name": "item",
                                                                    "source": [
                                                                        {
                                                                            "context": "medicationusestatementItem",
                                                                            "element": "item",
                                                                            "variable": "formItem",
                                                                            "condition": "(linkId = 'medicationsummary-medicationusestatement-form')"
                                                                        }
                                                                    ],
                                                                    "rule": [
                                                                        {
                                                                            "name": "answer",
                                                                            "source": [
                                                                                {
                                                                                    "context": "formItem",
                                                                                    "element": "answer",
                                                                                    "variable": "answer"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "medication",
                                                                                    "contextType": "variable",
                                                                                    "element": "form",
                                                                                    "variable": "form"
                                                                                }
                                                                            ],
                                                                            "rule": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "source": [
                                                                                        {
                                                                                            "context": "answer",
                                                                                            "element": "value",
                                                                                            "variable": "valueCoding",
                                                                                            "condition": "(ofType(Coding).exists())"
                                                                                        }
                                                                                    ],
                                                                                    "target": [
                                                                                        {
                                                                                            "context": "form",
                                                                                            "contextType": "variable",
                                                                                            "element": "coding",
                                                                                            "variable": "coding",
                                                                                            "listMode": [
                                                                                                "first"
                                                                                            ]
                                                                                        }
                                                                                    ],
                                                                                    "rule": [
                                                                                        {
                                                                                            "name": "cfb7c70243404704a86afcc307e7ad4b",
                                                                                            "source": [
                                                                                                {
                                                                                                    "context": "valueCoding"
                                                                                                }
                                                                                            ],
                                                                                            "target": [
                                                                                                {
                                                                                                    "context": "coding",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "system",
                                                                                                    "transform": "evaluate",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "%valueCoding.system"
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "context": "coding",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "code",
                                                                                                    "transform": "evaluate",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "%valueCoding.code"
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "context": "coding",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "display",
                                                                                                    "transform": "evaluate",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "%valueCoding.display"
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "context": "form",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "text",
                                                                                                    "transform": "evaluate",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "%valueCoding.display"
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ],
                                                                    "documentation": "form -> MedicationStatement.contained:medication.form"
                                                                },
                                                                {
                                                                    "name": "item",
                                                                    "source": [
                                                                        {
                                                                            "context": "medicationusestatementItem",
                                                                            "element": "item",
                                                                            "variable": "strengthItem",
                                                                            "condition": "(linkId = 'medicationsummary-medicationusestatement-strength')"
                                                                        }
                                                                    ],
                                                                    "rule": [
                                                                        {
                                                                            "name": "answer",
                                                                            "source": [
                                                                                {
                                                                                    "context": "strengthItem",
                                                                                    "element": "answer",
                                                                                    "variable": "answer"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "medication",
                                                                                    "contextType": "variable",
                                                                                    "element": "ingredient",
                                                                                    "variable": "ingredient"
                                                                                }
                                                                            ],
                                                                            "rule": [
                                                                                {
                                                                                    "name": "item",
                                                                                    "source": [
                                                                                        {
                                                                                            "context": "medicationusestatementItem",
                                                                                            "element": "item",
                                                                                            "variable": "nameItem",
                                                                                            "condition": "(linkId = 'medicationsummary-medicationusestatement-name')"
                                                                                        }
                                                                                    ],
                                                                                    "rule": [
                                                                                        {
                                                                                            "name": "answer",
                                                                                            "source": [
                                                                                                {
                                                                                                    "context": "nameItem",
                                                                                                    "element": "answer",
                                                                                                    "variable": "answer"
                                                                                                }
                                                                                            ],
                                                                                            "target": [
                                                                                                {
                                                                                                    "context": "ingredient",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "item",
                                                                                                    "variable": "item",
                                                                                                    "transform": "create",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "CodeableConcept"
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ],
                                                                                            "rule": [
                                                                                                {
                                                                                                    "name": "value",
                                                                                                    "source": [
                                                                                                        {
                                                                                                            "context": "answer",
                                                                                                            "element": "value",
                                                                                                            "variable": "valueCoding",
                                                                                                            "condition": "(ofType(Coding).exists())"
                                                                                                        }
                                                                                                    ],
                                                                                                    "target": [
                                                                                                        {
                                                                                                            "context": "item",
                                                                                                            "contextType": "variable",
                                                                                                            "element": "coding",
                                                                                                            "variable": "coding",
                                                                                                            "listMode": [
                                                                                                                "first"
                                                                                                            ]
                                                                                                        }
                                                                                                    ],
                                                                                                    "rule": [
                                                                                                        {
                                                                                                            "name": "2767ca74494e406280a99d4e15eade7c",
                                                                                                            "source": [
                                                                                                                {
                                                                                                                    "context": "valueCoding"
                                                                                                                }
                                                                                                            ],
                                                                                                            "target": [
                                                                                                                {
                                                                                                                    "context": "coding",
                                                                                                                    "contextType": "variable",
                                                                                                                    "element": "system",
                                                                                                                    "transform": "evaluate",
                                                                                                                    "parameter": [
                                                                                                                        {
                                                                                                                            "valueString": "%valueCoding.system"
                                                                                                                        }
                                                                                                                    ]
                                                                                                                },
                                                                                                                {
                                                                                                                    "context": "coding",
                                                                                                                    "contextType": "variable",
                                                                                                                    "element": "code",
                                                                                                                    "transform": "evaluate",
                                                                                                                    "parameter": [
                                                                                                                        {
                                                                                                                            "valueString": "%valueCoding.code"
                                                                                                                        }
                                                                                                                    ]
                                                                                                                },
                                                                                                                {
                                                                                                                    "context": "coding",
                                                                                                                    "contextType": "variable",
                                                                                                                    "element": "display",
                                                                                                                    "transform": "evaluate",
                                                                                                                    "parameter": [
                                                                                                                        {
                                                                                                                            "valueString": "%valueCoding.display"
                                                                                                                        }
                                                                                                                    ]
                                                                                                                },
                                                                                                                {
                                                                                                                    "context": "item",
                                                                                                                    "contextType": "variable",
                                                                                                                    "element": "text",
                                                                                                                    "transform": "evaluate",
                                                                                                                    "parameter": [
                                                                                                                        {
                                                                                                                            "valueString": "%valueCoding.display"
                                                                                                                        }
                                                                                                                    ]
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "name": "b4fbf6b70d2b4a09bd043ef293d807c7",
                                                                                    "source": [
                                                                                        {
                                                                                            "context": "answer"
                                                                                        }
                                                                                    ],
                                                                                    "target": [
                                                                                        {
                                                                                            "context": "ingredient",
                                                                                            "contextType": "variable",
                                                                                            "element": "strength",
                                                                                            "variable": "strength"
                                                                                        }
                                                                                    ],
                                                                                    "rule": [
                                                                                        {
                                                                                            "name": "779299a8f20543eb869458ee2a9b7f4c",
                                                                                            "source": [
                                                                                                {
                                                                                                    "context": "answer"
                                                                                                }
                                                                                            ],
                                                                                            "target": [
                                                                                                {
                                                                                                    "context": "strength",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "numerator",
                                                                                                    "variable": "numerator"
                                                                                                }
                                                                                            ],
                                                                                            "rule": [
                                                                                                {
                                                                                                    "name": "ba67ccda8a534e68a09845308595ff84",
                                                                                                    "source": [
                                                                                                        {
                                                                                                            "context": "answer"
                                                                                                        }
                                                                                                    ],
                                                                                                    "target": [
                                                                                                        {
                                                                                                            "context": "numerator",
                                                                                                            "contextType": "variable",
                                                                                                            "element": "value",
                                                                                                            "transform": "evaluate",
                                                                                                            "parameter": [
                                                                                                                {
                                                                                                                    "valueString": "%answer.value"
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "name": "item",
                                                                                                    "source": [
                                                                                                        {
                                                                                                            "context": "strengthItem",
                                                                                                            "element": "item",
                                                                                                            "variable": "strengthunitItem",
                                                                                                            "condition": "(linkId = 'medicationsummary-medicationusestatement-strength-unit')"
                                                                                                        }
                                                                                                    ],
                                                                                                    "rule": [
                                                                                                        {
                                                                                                            "name": "answer",
                                                                                                            "source": [
                                                                                                                {
                                                                                                                    "context": "strengthunitItem",
                                                                                                                    "element": "answer",
                                                                                                                    "variable": "unitAnswer"
                                                                                                                }
                                                                                                            ],
                                                                                                            "target": [
                                                                                                                {
                                                                                                                    "context": "numerator",
                                                                                                                    "contextType": "variable",
                                                                                                                    "element": "code",
                                                                                                                    "transform": "evaluate",
                                                                                                                    "parameter": [
                                                                                                                        {
                                                                                                                            "valueString": "%unitAnswer.value.code"
                                                                                                                        }
                                                                                                                    ]
                                                                                                                },
                                                                                                                {
                                                                                                                    "context": "numerator",
                                                                                                                    "contextType": "variable",
                                                                                                                    "element": "system",
                                                                                                                    "transform": "evaluate",
                                                                                                                    "parameter": [
                                                                                                                        {
                                                                                                                            "valueString": "%unitAnswer.value.system"
                                                                                                                        }
                                                                                                                    ]
                                                                                                                },
                                                                                                                {
                                                                                                                    "context": "numerator",
                                                                                                                    "contextType": "variable",
                                                                                                                    "element": "unit",
                                                                                                                    "transform": "evaluate",
                                                                                                                    "parameter": [
                                                                                                                        {
                                                                                                                            "valueString": "%unitAnswer.value.display"
                                                                                                                        }
                                                                                                                    ]
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ],
                                                                    "documentation": "strength -> MedicationStatement.contained:medication.ingredient.strength"
                                                                }
                                                            ],
                                                            "documentation": "contained:medication"
                                                        },
                                                        {
                                                            "name": "5e8f068ee7db4509b1b2bbe054553770",
                                                            "source": [
                                                                {
                                                                    "context": "medicationusestatementItem"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "medicationstatement",
                                                                    "contextType": "variable",
                                                                    "element": "medication",
                                                                    "variable": "medicationReference",
                                                                    "transform": "create",
                                                                    "parameter": [
                                                                        {
                                                                            "valueString": "Reference"
                                                                        }
                                                                    ]
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "d4572f713b3e42d4ba02880085748acc",
                                                                    "source": [
                                                                        {
                                                                            "context": "medicationusestatementItem"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "context": "medicationReference",
                                                                            "contextType": "variable",
                                                                            "element": "reference",
                                                                            "transform": "copy",
                                                                            "parameter": [
                                                                                {
                                                                                    "valueString": "#medication"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "name": "6fbba14eb2d74fdbaa296a7b4801cf7f",
                                                            "source": [
                                                                {
                                                                    "context": "medicationusestatementItem"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "medicationstatement",
                                                                    "contextType": "variable",
                                                                    "element": "dosage",
                                                                    "variable": "dosage"
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "item",
                                                                    "source": [
                                                                        {
                                                                            "context": "medicationusestatementItem",
                                                                            "element": "item",
                                                                            "variable": "route",
                                                                            "condition": "(linkId = 'medicationsummary-medicationusestatement-route')"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "transform": "copy",
                                                                            "parameter": [
                                                                                {
                                                                                    "valueId": "medicationstatement"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ],
                                                                    "rule": [
                                                                        {
                                                                            "name": "answer",
                                                                            "source": [
                                                                                {
                                                                                    "context": "route",
                                                                                    "element": "answer",
                                                                                    "variable": "answer"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "dosage",
                                                                                    "contextType": "variable",
                                                                                    "element": "route",
                                                                                    "variable": "route"
                                                                                }
                                                                            ],
                                                                            "rule": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "source": [
                                                                                        {
                                                                                            "context": "answer",
                                                                                            "element": "value",
                                                                                            "variable": "valueCoding",
                                                                                            "condition": "(ofType(Coding).exists())"
                                                                                        }
                                                                                    ],
                                                                                    "target": [
                                                                                        {
                                                                                            "context": "route",
                                                                                            "contextType": "variable",
                                                                                            "element": "coding",
                                                                                            "variable": "coding"
                                                                                        }
                                                                                    ],
                                                                                    "rule": [
                                                                                        {
                                                                                            "name": "a66d0511c58a401e9a9688a3d3ae2aaa",
                                                                                            "source": [
                                                                                                {
                                                                                                    "context": "valueCoding"
                                                                                                }
                                                                                            ],
                                                                                            "target": [
                                                                                                {
                                                                                                    "context": "coding",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "system",
                                                                                                    "transform": "evaluate",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "%valueCoding.system"
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "context": "coding",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "code",
                                                                                                    "transform": "evaluate",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "%valueCoding.code"
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "context": "coding",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "display",
                                                                                                    "transform": "evaluate",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "%valueCoding.display"
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "context": "route",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "text",
                                                                                                    "transform": "evaluate",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "%valueCoding.display"
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ],
                                                                    "documentation": "route -> MedicationStatement.dosage.route"
                                                                },
                                                                {
                                                                    "name": "item",
                                                                    "source": [
                                                                        {
                                                                            "context": "medicationusestatementItem",
                                                                            "element": "item",
                                                                            "variable": "doseItem",
                                                                            "condition": "(linkId = 'medicationsummary-medicationusestatement-doseamount')"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "transform": "copy",
                                                                            "parameter": [
                                                                                {
                                                                                    "valueId": "medicationstatement"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ],
                                                                    "rule": [
                                                                        {
                                                                            "name": "answer",
                                                                            "source": [
                                                                                {
                                                                                    "context": "doseItem",
                                                                                    "element": "answer",
                                                                                    "variable": "answer"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "dosage",
                                                                                    "contextType": "variable",
                                                                                    "element": "doseAndRate",
                                                                                    "variable": "doseAndRate",
                                                                                    "listMode": [
                                                                                        "first"
                                                                                    ]
                                                                                }
                                                                            ],
                                                                            "rule": [
                                                                                {
                                                                                    "name": "915ddd2c334e4a8bbdc9af70c5fb5993",
                                                                                    "source": [
                                                                                        {
                                                                                            "context": "answer"
                                                                                        }
                                                                                    ],
                                                                                    "target": [
                                                                                        {
                                                                                            "context": "doseAndRate",
                                                                                            "contextType": "variable",
                                                                                            "element": "dose",
                                                                                            "variable": "doseQuantity",
                                                                                            "transform": "create",
                                                                                            "parameter": [
                                                                                                {
                                                                                                    "valueString": "Quantity"
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ],
                                                                                    "rule": [
                                                                                        {
                                                                                            "name": "e444db9e1f3643e3a19c60cacf0a70d7",
                                                                                            "source": [
                                                                                                {
                                                                                                    "context": "answer"
                                                                                                }
                                                                                            ],
                                                                                            "target": [
                                                                                                {
                                                                                                    "context": "doseQuantity",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "value",
                                                                                                    "transform": "evaluate",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "%answer.value"
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "name": "item",
                                                                                            "source": [
                                                                                                {
                                                                                                    "context": "doseItem",
                                                                                                    "element": "item",
                                                                                                    "variable": "doseunitItem",
                                                                                                    "condition": "(linkId = 'medicationsummary-medicationusestatement-doseamount-unit')"
                                                                                                }
                                                                                            ],
                                                                                            "rule": [
                                                                                                {
                                                                                                    "name": "answer",
                                                                                                    "source": [
                                                                                                        {
                                                                                                            "context": "doseunitItem",
                                                                                                            "element": "answer",
                                                                                                            "variable": "unitAnswer"
                                                                                                        }
                                                                                                    ],
                                                                                                    "target": [
                                                                                                        {
                                                                                                            "context": "doseQuantity",
                                                                                                            "contextType": "variable",
                                                                                                            "element": "code",
                                                                                                            "transform": "evaluate",
                                                                                                            "parameter": [
                                                                                                                {
                                                                                                                    "valueString": "%unitAnswer.value.code"
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "context": "doseQuantity",
                                                                                                            "contextType": "variable",
                                                                                                            "element": "system",
                                                                                                            "transform": "evaluate",
                                                                                                            "parameter": [
                                                                                                                {
                                                                                                                    "valueString": "%unitAnswer.value.system"
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "context": "doseQuantity",
                                                                                                            "contextType": "variable",
                                                                                                            "element": "unit",
                                                                                                            "transform": "evaluate",
                                                                                                            "parameter": [
                                                                                                                {
                                                                                                                    "valueString": "%unitAnswer.value.display"
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ],
                                                                    "documentation": "dose amount -> MedicationStatement.dosage.doseAndRate"
                                                                },
                                                                {
                                                                    "name": "item",
                                                                    "source": [
                                                                        {
                                                                            "context": "medicationusestatementItem",
                                                                            "element": "item",
                                                                            "variable": "dosetiming",
                                                                            "condition": "(linkId = 'medicationsummary-medicationusestatement-dosetiming')"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "transform": "copy",
                                                                            "parameter": [
                                                                                {
                                                                                    "valueId": "medicationstatement"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ],
                                                                    "rule": [
                                                                        {
                                                                            "name": "answer",
                                                                            "source": [
                                                                                {
                                                                                    "context": "dosetiming",
                                                                                    "element": "answer",
                                                                                    "variable": "answer"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "dosage",
                                                                                    "contextType": "variable",
                                                                                    "element": "timing",
                                                                                    "variable": "timing"
                                                                                }
                                                                            ],
                                                                            "rule": [
                                                                                {
                                                                                    "name": "bf262c055ca8420fad6b2990d0dbd23a",
                                                                                    "source": [
                                                                                        {
                                                                                            "context": "answer"
                                                                                        }
                                                                                    ],
                                                                                    "target": [
                                                                                        {
                                                                                            "context": "timing",
                                                                                            "contextType": "variable",
                                                                                            "element": "code",
                                                                                            "variable": "code"
                                                                                        }
                                                                                    ],
                                                                                    "rule": [
                                                                                        {
                                                                                            "name": "value",
                                                                                            "source": [
                                                                                                {
                                                                                                    "context": "answer",
                                                                                                    "element": "value",
                                                                                                    "variable": "valueCoding",
                                                                                                    "condition": "(ofType(Coding).exists())"
                                                                                                }
                                                                                            ],
                                                                                            "target": [
                                                                                                {
                                                                                                    "context": "code",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "coding",
                                                                                                    "variable": "codeCoding"
                                                                                                }
                                                                                            ],
                                                                                            "rule": [
                                                                                                {
                                                                                                    "name": "66b68c7f9a9044f6accec5d96b36ef37",
                                                                                                    "source": [
                                                                                                        {
                                                                                                            "context": "valueCoding"
                                                                                                        }
                                                                                                    ],
                                                                                                    "target": [
                                                                                                        {
                                                                                                            "context": "codeCoding",
                                                                                                            "contextType": "variable",
                                                                                                            "element": "system",
                                                                                                            "transform": "evaluate",
                                                                                                            "parameter": [
                                                                                                                {
                                                                                                                    "valueString": "%valueCoding.system"
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "context": "codeCoding",
                                                                                                            "contextType": "variable",
                                                                                                            "element": "code",
                                                                                                            "transform": "evaluate",
                                                                                                            "parameter": [
                                                                                                                {
                                                                                                                    "valueString": "%valueCoding.code"
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "context": "codeCoding",
                                                                                                            "contextType": "variable",
                                                                                                            "element": "display",
                                                                                                            "transform": "evaluate",
                                                                                                            "parameter": [
                                                                                                                {
                                                                                                                    "valueString": "%valueCoding.display"
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "context": "code",
                                                                                                            "contextType": "variable",
                                                                                                            "element": "text",
                                                                                                            "transform": "evaluate",
                                                                                                            "parameter": [
                                                                                                                {
                                                                                                                    "valueString": "%valueCoding.display"
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "name": "value",
                                                                                            "source": [
                                                                                                {
                                                                                                    "context": "answer",
                                                                                                    "element": "value",
                                                                                                    "variable": "valueString",
                                                                                                    "condition": "(ofType(String).exists())"
                                                                                                }
                                                                                            ],
                                                                                            "target": [
                                                                                                {
                                                                                                    "context": "code",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "text",
                                                                                                    "transform": "copy",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueId": "valueString"
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ],
                                                                    "documentation": "dose timing -> MedicationStatement.dosage.timing.code"
                                                                }
                                                            ],
                                                            "documentation": "dosage"
                                                        },
                                                        {
                                                            "name": "item",
                                                            "source": [
                                                                {
                                                                    "context": "medicationusestatementItem",
                                                                    "element": "item",
                                                                    "variable": "indication",
                                                                    "condition": "(linkId = 'medicationsummary-medicationusestatement-reasoncode')"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "transform": "copy",
                                                                    "parameter": [
                                                                        {
                                                                            "valueId": "medicationstatement"
                                                                        }
                                                                    ]
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "answer",
                                                                    "source": [
                                                                        {
                                                                            "context": "indication",
                                                                            "element": "answer",
                                                                            "variable": "answer"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "context": "medicationstatement",
                                                                            "contextType": "variable",
                                                                            "element": "reasonCode",
                                                                            "variable": "reasoncode"
                                                                        }
                                                                    ],
                                                                    "rule": [
                                                                        {
                                                                            "name": "value",
                                                                            "source": [
                                                                                {
                                                                                    "context": "answer",
                                                                                    "element": "value",
                                                                                    "variable": "value"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "reasoncode",
                                                                                    "contextType": "variable",
                                                                                    "element": "coding",
                                                                                    "variable": "coding"
                                                                                }
                                                                            ],
                                                                            "rule": [
                                                                                {
                                                                                    "name": "1c121910b6df46d3b824a45a3caf583d",
                                                                                    "source": [
                                                                                        {
                                                                                            "context": "value"
                                                                                        }
                                                                                    ],
                                                                                    "target": [
                                                                                        {
                                                                                            "context": "coding",
                                                                                            "contextType": "variable",
                                                                                            "element": "system",
                                                                                            "transform": "evaluate",
                                                                                            "parameter": [
                                                                                                {
                                                                                                    "valueString": "%value.system"
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "context": "coding",
                                                                                            "contextType": "variable",
                                                                                            "element": "code",
                                                                                            "transform": "evaluate",
                                                                                            "parameter": [
                                                                                                {
                                                                                                    "valueString": "%value.code"
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "context": "coding",
                                                                                            "contextType": "variable",
                                                                                            "element": "display",
                                                                                            "transform": "evaluate",
                                                                                            "parameter": [
                                                                                                {
                                                                                                    "valueString": "%value.display"
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "context": "reasoncode",
                                                                                            "contextType": "variable",
                                                                                            "element": "text",
                                                                                            "transform": "evaluate",
                                                                                            "parameter": [
                                                                                                {
                                                                                                    "valueString": "%value.display"
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ],
                                                            "documentation": "clinical indication -> MedicationStatement.reasonCode"
                                                        },
                                                        {
                                                            "name": "item",
                                                            "source": [
                                                                {
                                                                    "context": "medicationusestatementItem",
                                                                    "element": "item",
                                                                    "variable": "comment",
                                                                    "condition": "(linkId = 'medicationsummary-medicationusestatement-comment')"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "medicationstatement",
                                                                    "contextType": "variable",
                                                                    "element": "note",
                                                                    "variable": "note"
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "answer",
                                                                    "source": [
                                                                        {
                                                                            "context": "comment",
                                                                            "element": "answer"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "context": "note",
                                                                            "contextType": "variable",
                                                                            "element": "text",
                                                                            "transform": "evaluate",
                                                                            "parameter": [
                                                                                {
                                                                                    "valueString": "%comment.answer.value"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ],
                                                            "documentation": "comment -> MedicationStatement.note"
                                                        },
                                                        {
                                                            "name": "0e941d8441e9479f886b364d63618744",
                                                            "source": [
                                                                {
                                                                    "context": "medicationusestatementItem"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "medicationstatement",
                                                                    "contextType": "variable",
                                                                    "element": "status",
                                                                    "transform": "copy",
                                                                    "parameter": [
                                                                        {
                                                                            "valueString": "completed"
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "name": "subject",
                                                            "source": [
                                                                {
                                                                    "context": "src",
                                                                    "element": "subject"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "medicationstatement",
                                                                    "contextType": "variable",
                                                                    "element": "subject",
                                                                    "transform": "evaluate",
                                                                    "parameter": [
                                                                        {
                                                                            "valueString": "%src.subject"
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "name": "item",
                                    "source": [
                                        {
                                            "context": "medicationsummaryItem",
                                            "element": "item",
                                            "variable": "prescribedmedicationItem",
                                            "condition": "(linkId = 'medicationsummary-prescribedmedication')"
                                        }
                                    ],
                                    "target": [
                                        {
                                            "context": "bundle",
                                            "contextType": "variable",
                                            "element": "entry",
                                            "variable": "entry"
                                        }
                                    ],
                                    "rule": [
                                        {
                                            "name": "2bb7c7c5d9a349558b7c1b761a125a73",
                                            "source": [
                                                {
                                                    "context": "prescribedmedicationItem",
                                                    "condition": "(item.where(linkId = 'medicationsummary-prescribedmedication-id').exists().not())"
                                                }
                                            ],
                                            "target": [
                                                {
                                                    "context": "entry",
                                                    "contextType": "variable",
                                                    "element": "request",
                                                    "variable": "request"
                                                }
                                            ],
                                            "rule": [
                                                {
                                                    "name": "f8dcf507d0984a2db0ade7175ebf347b",
                                                    "source": [
                                                        {
                                                            "context": "prescribedmedicationItem"
                                                        }
                                                    ],
                                                    "target": [
                                                        {
                                                            "context": "entry",
                                                            "contextType": "variable",
                                                            "element": "fullUrl",
                                                            "variable": "uuid",
                                                            "transform": "uuid"
                                                        },
                                                        {
                                                            "context": "entry",
                                                            "contextType": "variable",
                                                            "element": "fullUrl",
                                                            "transform": "append",
                                                            "parameter": [
                                                                {
                                                                    "valueString": "urn:uuid:"
                                                                },
                                                                {
                                                                    "valueId": "uuid"
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "context": "request",
                                                            "contextType": "variable",
                                                            "element": "method",
                                                            "transform": "copy",
                                                            "parameter": [
                                                                {
                                                                    "valueString": "POST"
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "name": "d25c9b1363ed4203b5ba4f47c9161065",
                                                    "source": [
                                                        {
                                                            "context": "prescribedmedicationItem"
                                                        }
                                                    ],
                                                    "target": [
                                                        {
                                                            "context": "entry",
                                                            "contextType": "variable",
                                                            "element": "resource",
                                                            "variable": "medicationrequest",
                                                            "transform": "create",
                                                            "parameter": [
                                                                {
                                                                    "valueString": "MedicationRequest"
                                                                }
                                                            ]
                                                        }
                                                    ],
                                                    "rule": [
                                                        {
                                                            "name": "05ac516fd49e43ac8e77a8490ecde737",
                                                            "source": [
                                                                {
                                                                    "context": "prescribedmedicationItem"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "medicationrequest",
                                                                    "contextType": "variable",
                                                                    "element": "meta",
                                                                    "variable": "meta"
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "1b23e5e27123416fa1df8b1c3951f079",
                                                                    "source": [
                                                                        {
                                                                            "context": "prescribedmedicationItem"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "context": "meta",
                                                                            "contextType": "variable",
                                                                            "element": "profile",
                                                                            "transform": "copy",
                                                                            "parameter": [
                                                                                {
                                                                                    "valueString": "http://hl7.org.au/fhir/core/StructureDefinition/au-core-medicationrequest"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "name": "137d377e3fff47a0aacc59deb9b321b4",
                                                            "source": [
                                                                {
                                                                    "context": "prescribedmedicationItem"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "medicationrequest",
                                                                    "contextType": "variable",
                                                                    "element": "contained",
                                                                    "variable": "medication",
                                                                    "transform": "create",
                                                                    "parameter": [
                                                                        {
                                                                            "valueString": "Medication"
                                                                        }
                                                                    ]
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "b3ee6f2576714e328fd2d775f2b2011f",
                                                                    "source": [
                                                                        {
                                                                            "context": "prescribedmedicationItem"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "context": "medication",
                                                                            "contextType": "variable",
                                                                            "element": "id",
                                                                            "transform": "copy",
                                                                            "parameter": [
                                                                                {
                                                                                    "valueString": "medication"
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "context": "medication",
                                                                            "contextType": "variable",
                                                                            "element": "meta",
                                                                            "variable": "meta"
                                                                        }
                                                                    ],
                                                                    "rule": [
                                                                        {
                                                                            "name": "2fb9a7693d6d4c7cac64350db66ce509",
                                                                            "source": [
                                                                                {
                                                                                    "context": "prescribedmedicationItem"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "meta",
                                                                                    "contextType": "variable",
                                                                                    "element": "profile",
                                                                                    "transform": "copy",
                                                                                    "parameter": [
                                                                                        {
                                                                                            "valueString": "http://hl7.org.au/fhir/core/StructureDefinition/au-core-medication"
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "name": "item",
                                                                    "source": [
                                                                        {
                                                                            "context": "prescribedmedicationItem",
                                                                            "element": "item",
                                                                            "variable": "nameItem",
                                                                            "condition": "(linkId = 'medicationsummary-prescribedmedication-name')"
                                                                        }
                                                                    ],
                                                                    "rule": [
                                                                        {
                                                                            "name": "answer",
                                                                            "source": [
                                                                                {
                                                                                    "context": "nameItem",
                                                                                    "element": "answer",
                                                                                    "variable": "answer"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "medication",
                                                                                    "contextType": "variable",
                                                                                    "element": "code",
                                                                                    "variable": "code"
                                                                                }
                                                                            ],
                                                                            "rule": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "source": [
                                                                                        {
                                                                                            "context": "answer",
                                                                                            "element": "value",
                                                                                            "variable": "valueCoding",
                                                                                            "condition": "(ofType(Coding).exists())"
                                                                                        }
                                                                                    ],
                                                                                    "target": [
                                                                                        {
                                                                                            "context": "code",
                                                                                            "contextType": "variable",
                                                                                            "element": "coding",
                                                                                            "variable": "coding",
                                                                                            "listMode": [
                                                                                                "first"
                                                                                            ]
                                                                                        }
                                                                                    ],
                                                                                    "rule": [
                                                                                        {
                                                                                            "name": "7ac223bbb4e548c8aa97bba2edb6e7a0",
                                                                                            "source": [
                                                                                                {
                                                                                                    "context": "valueCoding"
                                                                                                }
                                                                                            ],
                                                                                            "target": [
                                                                                                {
                                                                                                    "context": "coding",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "system",
                                                                                                    "transform": "evaluate",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "%valueCoding.system"
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "context": "coding",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "code",
                                                                                                    "transform": "evaluate",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "%valueCoding.code"
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "context": "coding",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "display",
                                                                                                    "transform": "evaluate",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "%valueCoding.display"
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "context": "code",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "text",
                                                                                                    "transform": "evaluate",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "%valueCoding.display"
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "name": "684c46e04eea4d44841c11a98e4069c8",
                                                                                            "source": [
                                                                                                {
                                                                                                    "context": "prescribedmedicationItem"
                                                                                                }
                                                                                            ],
                                                                                            "target": [
                                                                                                {
                                                                                                    "context": "medicationrequest",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "medication",
                                                                                                    "variable": "medicationReference",
                                                                                                    "transform": "create",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "Reference"
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ],
                                                                                            "rule": [
                                                                                                {
                                                                                                    "name": "0b9a204a76d346bc98a9f21268e2d76e",
                                                                                                    "source": [
                                                                                                        {
                                                                                                            "context": "prescribedmedicationItem"
                                                                                                        }
                                                                                                    ],
                                                                                                    "target": [
                                                                                                        {
                                                                                                            "context": "medicationReference",
                                                                                                            "contextType": "variable",
                                                                                                            "element": "reference",
                                                                                                            "transform": "copy",
                                                                                                            "parameter": [
                                                                                                                {
                                                                                                                    "valueString": "#medication"
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "context": "medicationReference",
                                                                                                            "contextType": "variable",
                                                                                                            "element": "display",
                                                                                                            "transform": "evaluate",
                                                                                                            "parameter": [
                                                                                                                {
                                                                                                                    "valueString": "%valueCoding.display"
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ],
                                                                                            "documentation": "medicationReference"
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ],
                                                                    "documentation": "name -> MedicationRequest.contained:medication.code"
                                                                },
                                                                {
                                                                    "name": "item",
                                                                    "source": [
                                                                        {
                                                                            "context": "prescribedmedicationItem",
                                                                            "element": "item",
                                                                            "variable": "formItem",
                                                                            "condition": "(linkId = 'medicationsummary-prescribedmedication-form')"
                                                                        }
                                                                    ],
                                                                    "rule": [
                                                                        {
                                                                            "name": "answer",
                                                                            "source": [
                                                                                {
                                                                                    "context": "formItem",
                                                                                    "element": "answer",
                                                                                    "variable": "answer"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "medication",
                                                                                    "contextType": "variable",
                                                                                    "element": "form",
                                                                                    "variable": "form"
                                                                                }
                                                                            ],
                                                                            "rule": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "source": [
                                                                                        {
                                                                                            "context": "answer",
                                                                                            "element": "value",
                                                                                            "variable": "valueCoding",
                                                                                            "condition": "(ofType(Coding).exists())"
                                                                                        }
                                                                                    ],
                                                                                    "target": [
                                                                                        {
                                                                                            "context": "form",
                                                                                            "contextType": "variable",
                                                                                            "element": "coding",
                                                                                            "variable": "coding",
                                                                                            "listMode": [
                                                                                                "first"
                                                                                            ]
                                                                                        }
                                                                                    ],
                                                                                    "rule": [
                                                                                        {
                                                                                            "name": "bd0473c18570404facc23b2fd507a51a",
                                                                                            "source": [
                                                                                                {
                                                                                                    "context": "valueCoding"
                                                                                                }
                                                                                            ],
                                                                                            "target": [
                                                                                                {
                                                                                                    "context": "coding",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "system",
                                                                                                    "transform": "evaluate",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "%valueCoding.system"
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "context": "coding",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "code",
                                                                                                    "transform": "evaluate",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "%valueCoding.code"
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "context": "coding",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "display",
                                                                                                    "transform": "evaluate",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "%valueCoding.display"
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "context": "form",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "text",
                                                                                                    "transform": "evaluate",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "%valueCoding.display"
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ],
                                                                    "documentation": "form -> MedicationRequest.contained:medication.form"
                                                                }
                                                            ],
                                                            "documentation": "contained:medication"
                                                        },
                                                        {
                                                            "name": "70dcd54b1239481d9ca13a38e2074a37",
                                                            "source": [
                                                                {
                                                                    "context": "prescribedmedicationItem"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "medicationrequest",
                                                                    "contextType": "variable",
                                                                    "element": "dosageInstruction",
                                                                    "variable": "dosage"
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "item",
                                                                    "source": [
                                                                        {
                                                                            "context": "prescribedmedicationItem",
                                                                            "element": "item",
                                                                            "variable": "route",
                                                                            "condition": "(linkId = 'medicationsummary-prescribedmedication-route')"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "transform": "copy",
                                                                            "parameter": [
                                                                                {
                                                                                    "valueId": "medicationrequest"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ],
                                                                    "rule": [
                                                                        {
                                                                            "name": "answer",
                                                                            "source": [
                                                                                {
                                                                                    "context": "route",
                                                                                    "element": "answer",
                                                                                    "variable": "answer"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "dosage",
                                                                                    "contextType": "variable",
                                                                                    "element": "route",
                                                                                    "variable": "route"
                                                                                }
                                                                            ],
                                                                            "rule": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "source": [
                                                                                        {
                                                                                            "context": "answer",
                                                                                            "element": "value",
                                                                                            "variable": "valueCoding",
                                                                                            "condition": "(ofType(Coding).exists())"
                                                                                        }
                                                                                    ],
                                                                                    "target": [
                                                                                        {
                                                                                            "context": "route",
                                                                                            "contextType": "variable",
                                                                                            "element": "coding",
                                                                                            "variable": "coding"
                                                                                        }
                                                                                    ],
                                                                                    "rule": [
                                                                                        {
                                                                                            "name": "22326d3ca21e4c5da0e3f80edda0fe4f",
                                                                                            "source": [
                                                                                                {
                                                                                                    "context": "valueCoding"
                                                                                                }
                                                                                            ],
                                                                                            "target": [
                                                                                                {
                                                                                                    "context": "coding",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "system",
                                                                                                    "transform": "evaluate",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "%valueCoding.system"
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "context": "coding",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "code",
                                                                                                    "transform": "evaluate",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "%valueCoding.code"
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "context": "coding",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "display",
                                                                                                    "transform": "evaluate",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "%valueCoding.display"
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    "context": "route",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "text",
                                                                                                    "transform": "evaluate",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "%valueCoding.display"
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ],
                                                                    "documentation": "route -> MedicationRequest.dosageInstruction.route"
                                                                },
                                                                {
                                                                    "name": "item",
                                                                    "source": [
                                                                        {
                                                                            "context": "prescribedmedicationItem",
                                                                            "element": "item",
                                                                            "variable": "doseItem",
                                                                            "condition": "(linkId = 'medicationsummary-prescribedmedication-doseamount')"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "transform": "copy",
                                                                            "parameter": [
                                                                                {
                                                                                    "valueId": "medicationrequest"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ],
                                                                    "rule": [
                                                                        {
                                                                            "name": "answer",
                                                                            "source": [
                                                                                {
                                                                                    "context": "doseItem",
                                                                                    "element": "answer",
                                                                                    "variable": "answer"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "dosage",
                                                                                    "contextType": "variable",
                                                                                    "element": "doseAndRate",
                                                                                    "variable": "doseAndRate",
                                                                                    "listMode": [
                                                                                        "first"
                                                                                    ]
                                                                                }
                                                                            ],
                                                                            "rule": [
                                                                                {
                                                                                    "name": "9a34337d70f646ba84cecb73074165f5",
                                                                                    "source": [
                                                                                        {
                                                                                            "context": "answer"
                                                                                        }
                                                                                    ],
                                                                                    "target": [
                                                                                        {
                                                                                            "context": "doseAndRate",
                                                                                            "contextType": "variable",
                                                                                            "element": "dose",
                                                                                            "variable": "doseQuantity",
                                                                                            "transform": "create",
                                                                                            "parameter": [
                                                                                                {
                                                                                                    "valueString": "Quantity"
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ],
                                                                                    "rule": [
                                                                                        {
                                                                                            "name": "3265bc9a67be4b8dbd5c400514a5e1a3",
                                                                                            "source": [
                                                                                                {
                                                                                                    "context": "answer"
                                                                                                }
                                                                                            ],
                                                                                            "target": [
                                                                                                {
                                                                                                    "context": "doseQuantity",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "value",
                                                                                                    "transform": "evaluate",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueString": "%answer.value"
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "name": "item",
                                                                                            "source": [
                                                                                                {
                                                                                                    "context": "doseItem",
                                                                                                    "element": "item",
                                                                                                    "variable": "doseunitItem",
                                                                                                    "condition": "(linkId = 'medicationsummary-prescribedmedication-doseamount-unit')"
                                                                                                }
                                                                                            ],
                                                                                            "rule": [
                                                                                                {
                                                                                                    "name": "answer",
                                                                                                    "source": [
                                                                                                        {
                                                                                                            "context": "doseunitItem",
                                                                                                            "element": "answer",
                                                                                                            "variable": "unitAnswer"
                                                                                                        }
                                                                                                    ],
                                                                                                    "target": [
                                                                                                        {
                                                                                                            "context": "doseQuantity",
                                                                                                            "contextType": "variable",
                                                                                                            "element": "code",
                                                                                                            "transform": "evaluate",
                                                                                                            "parameter": [
                                                                                                                {
                                                                                                                    "valueString": "%unitAnswer.value.code"
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "context": "doseQuantity",
                                                                                                            "contextType": "variable",
                                                                                                            "element": "system",
                                                                                                            "transform": "evaluate",
                                                                                                            "parameter": [
                                                                                                                {
                                                                                                                    "valueString": "%unitAnswer.value.system"
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "context": "doseQuantity",
                                                                                                            "contextType": "variable",
                                                                                                            "element": "unit",
                                                                                                            "transform": "evaluate",
                                                                                                            "parameter": [
                                                                                                                {
                                                                                                                    "valueString": "%unitAnswer.value.display"
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ],
                                                                    "documentation": "dose amount -> MedicationRequest.dosageInstruction.doseAndRate"
                                                                },
                                                                {
                                                                    "name": "item",
                                                                    "source": [
                                                                        {
                                                                            "context": "prescribedmedicationItem",
                                                                            "element": "item",
                                                                            "variable": "dosetiming",
                                                                            "condition": "(linkId = 'medicationsummary-prescribedmedication-dosetiming')"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "transform": "copy",
                                                                            "parameter": [
                                                                                {
                                                                                    "valueId": "medicationrequest"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ],
                                                                    "rule": [
                                                                        {
                                                                            "name": "answer",
                                                                            "source": [
                                                                                {
                                                                                    "context": "dosetiming",
                                                                                    "element": "answer",
                                                                                    "variable": "answer"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "dosage",
                                                                                    "contextType": "variable",
                                                                                    "element": "timing",
                                                                                    "variable": "timing"
                                                                                }
                                                                            ],
                                                                            "rule": [
                                                                                {
                                                                                    "name": "dc63c2c5e4a04153aa0df38e1a996144",
                                                                                    "source": [
                                                                                        {
                                                                                            "context": "answer"
                                                                                        }
                                                                                    ],
                                                                                    "target": [
                                                                                        {
                                                                                            "context": "timing",
                                                                                            "contextType": "variable",
                                                                                            "element": "code",
                                                                                            "variable": "code"
                                                                                        }
                                                                                    ],
                                                                                    "rule": [
                                                                                        {
                                                                                            "name": "value",
                                                                                            "source": [
                                                                                                {
                                                                                                    "context": "answer",
                                                                                                    "element": "value",
                                                                                                    "variable": "valueCoding",
                                                                                                    "condition": "(ofType(Coding).exists())"
                                                                                                }
                                                                                            ],
                                                                                            "target": [
                                                                                                {
                                                                                                    "context": "code",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "coding",
                                                                                                    "variable": "codeCoding"
                                                                                                }
                                                                                            ],
                                                                                            "rule": [
                                                                                                {
                                                                                                    "name": "cc4a7873e2ea4f74ae4b8829bec47bf4",
                                                                                                    "source": [
                                                                                                        {
                                                                                                            "context": "valueCoding"
                                                                                                        }
                                                                                                    ],
                                                                                                    "target": [
                                                                                                        {
                                                                                                            "context": "codeCoding",
                                                                                                            "contextType": "variable",
                                                                                                            "element": "system",
                                                                                                            "transform": "evaluate",
                                                                                                            "parameter": [
                                                                                                                {
                                                                                                                    "valueString": "%valueCoding.system"
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "context": "codeCoding",
                                                                                                            "contextType": "variable",
                                                                                                            "element": "code",
                                                                                                            "transform": "evaluate",
                                                                                                            "parameter": [
                                                                                                                {
                                                                                                                    "valueString": "%valueCoding.code"
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "context": "codeCoding",
                                                                                                            "contextType": "variable",
                                                                                                            "element": "display",
                                                                                                            "transform": "evaluate",
                                                                                                            "parameter": [
                                                                                                                {
                                                                                                                    "valueString": "%valueCoding.display"
                                                                                                                }
                                                                                                            ]
                                                                                                        },
                                                                                                        {
                                                                                                            "context": "code",
                                                                                                            "contextType": "variable",
                                                                                                            "element": "text",
                                                                                                            "transform": "evaluate",
                                                                                                            "parameter": [
                                                                                                                {
                                                                                                                    "valueString": "%valueCoding.display"
                                                                                                                }
                                                                                                            ]
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "name": "value",
                                                                                            "source": [
                                                                                                {
                                                                                                    "context": "answer",
                                                                                                    "element": "value",
                                                                                                    "variable": "valueString",
                                                                                                    "condition": "(ofType(String).exists())"
                                                                                                }
                                                                                            ],
                                                                                            "target": [
                                                                                                {
                                                                                                    "context": "code",
                                                                                                    "contextType": "variable",
                                                                                                    "element": "text",
                                                                                                    "transform": "copy",
                                                                                                    "parameter": [
                                                                                                        {
                                                                                                            "valueId": "valueString"
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ],
                                                                    "documentation": "dose timing -> MedicationRequest.dosageInstruction.timing.code"
                                                                }
                                                            ],
                                                            "documentation": "dosage"
                                                        },
                                                        {
                                                            "name": "item",
                                                            "source": [
                                                                {
                                                                    "context": "prescribedmedicationItem",
                                                                    "element": "item",
                                                                    "variable": "indication",
                                                                    "condition": "(linkId = 'medicationsummary-prescribedmedication-reasoncode')"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "transform": "copy",
                                                                    "parameter": [
                                                                        {
                                                                            "valueId": "medicationrequest"
                                                                        }
                                                                    ]
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "answer",
                                                                    "source": [
                                                                        {
                                                                            "context": "indication",
                                                                            "element": "answer",
                                                                            "variable": "answer"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "context": "medicationrequest",
                                                                            "contextType": "variable",
                                                                            "element": "reasonCode",
                                                                            "variable": "reasoncode"
                                                                        }
                                                                    ],
                                                                    "rule": [
                                                                        {
                                                                            "name": "value",
                                                                            "source": [
                                                                                {
                                                                                    "context": "answer",
                                                                                    "element": "value",
                                                                                    "variable": "value"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "reasoncode",
                                                                                    "contextType": "variable",
                                                                                    "element": "coding",
                                                                                    "variable": "coding"
                                                                                }
                                                                            ],
                                                                            "rule": [
                                                                                {
                                                                                    "name": "d64cc1dc53ed4915a17f337221a4d147",
                                                                                    "source": [
                                                                                        {
                                                                                            "context": "value"
                                                                                        }
                                                                                    ],
                                                                                    "target": [
                                                                                        {
                                                                                            "context": "coding",
                                                                                            "contextType": "variable",
                                                                                            "element": "system",
                                                                                            "transform": "evaluate",
                                                                                            "parameter": [
                                                                                                {
                                                                                                    "valueString": "%value.system"
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "context": "coding",
                                                                                            "contextType": "variable",
                                                                                            "element": "code",
                                                                                            "transform": "evaluate",
                                                                                            "parameter": [
                                                                                                {
                                                                                                    "valueString": "%value.code"
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "context": "coding",
                                                                                            "contextType": "variable",
                                                                                            "element": "display",
                                                                                            "transform": "evaluate",
                                                                                            "parameter": [
                                                                                                {
                                                                                                    "valueString": "%value.display"
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "context": "reasoncode",
                                                                                            "contextType": "variable",
                                                                                            "element": "text",
                                                                                            "transform": "evaluate",
                                                                                            "parameter": [
                                                                                                {
                                                                                                    "valueString": "%value.display"
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ],
                                                            "documentation": "clinical indication -> MedicationRequest.reasonCode"
                                                        },
                                                        {
                                                            "name": "item",
                                                            "source": [
                                                                {
                                                                    "context": "prescribedmedicationItem",
                                                                    "element": "item",
                                                                    "variable": "comment",
                                                                    "condition": "(linkId = 'medicationsummary-prescribedmedication-comment')"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "medicationrequest",
                                                                    "contextType": "variable",
                                                                    "element": "note",
                                                                    "variable": "note"
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "answer",
                                                                    "source": [
                                                                        {
                                                                            "context": "comment",
                                                                            "element": "answer"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "context": "note",
                                                                            "contextType": "variable",
                                                                            "element": "text",
                                                                            "transform": "evaluate",
                                                                            "parameter": [
                                                                                {
                                                                                    "valueString": "%comment.answer.value"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ],
                                                            "documentation": "comment -> MedicationRequest.note"
                                                        },
                                                        {
                                                            "name": "item",
                                                            "source": [
                                                                {
                                                                    "context": "prescribedmedicationItem",
                                                                    "element": "item",
                                                                    "variable": "prescriptionDate",
                                                                    "condition": "(linkId = 'medicationsummary-prescribedmedication-date')"
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "answer",
                                                                    "source": [
                                                                        {
                                                                            "context": "prescriptionDate",
                                                                            "element": "answer",
                                                                            "variable": "answer"
                                                                        }
                                                                    ],
                                                                    "rule": [
                                                                        {
                                                                            "name": "value",
                                                                            "source": [
                                                                                {
                                                                                    "context": "answer",
                                                                                    "element": "value",
                                                                                    "variable": "adate",
                                                                                    "condition": "(ofType(dateTime).exists())"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "medicationrequest",
                                                                                    "contextType": "variable",
                                                                                    "element": "authoredOn",
                                                                                    "transform": "copy",
                                                                                    "parameter": [
                                                                                        {
                                                                                            "valueId": "adate"
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ],
                                                            "documentation": "prescriptionDate -> MedicationRequest.authoredOn"
                                                        },
                                                        {
                                                            "name": "5b18032af0d64c819ea86624f52775cb",
                                                            "source": [
                                                                {
                                                                    "context": "prescribedmedicationItem"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "medicationrequest",
                                                                    "contextType": "variable",
                                                                    "element": "status",
                                                                    "transform": "copy",
                                                                    "parameter": [
                                                                        {
                                                                            "valueString": "active"
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "context": "medicationrequest",
                                                                    "contextType": "variable",
                                                                    "element": "intent",
                                                                    "transform": "copy",
                                                                    "parameter": [
                                                                        {
                                                                            "valueString": "order"
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "name": "subject",
                                                            "source": [
                                                                {
                                                                    "context": "src",
                                                                    "element": "subject"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "medicationrequest",
                                                                    "contextType": "variable",
                                                                    "element": "subject",
                                                                    "transform": "evaluate",
                                                                    "parameter": [
                                                                        {
                                                                            "valueString": "%src.subject"
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "name": "author",
                                                            "source": [
                                                                {
                                                                    "context": "src",
                                                                    "element": "author",
                                                                    "variable": "author"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "medicationrequest",
                                                                    "contextType": "variable",
                                                                    "element": "requester",
                                                                    "transform": "evaluate",
                                                                    "parameter": [
                                                                        {
                                                                            "valueString": "%author"
                                                                        }
                                                                    ]
                                                                }
                                                            ],
                                                            "documentation": "requester"
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ],
                                    "documentation": "Prescribed medication"
                                }
                            ],
                            "documentation": "Medication Summary"
                        },
                        {
                            "name": "item",
                            "source": [
                                {
                                    "context": "tabContainer",
                                    "element": "item",
                                    "variable": "immunizationsItem",
                                    "condition": "(linkId = 'immunizations')"
                                }
                            ],
                            "rule": [
                                {
                                    "name": "item",
                                    "source": [
                                        {
                                            "context": "immunizationsItem",
                                            "element": "item",
                                            "variable": "vaccinationadministeredeventItem",
                                            "condition": "(linkId = 'immunizations-vaccinationadministeredevent')"
                                        }
                                    ],
                                    "target": [
                                        {
                                            "context": "bundle",
                                            "contextType": "variable",
                                            "element": "entry",
                                            "variable": "entry"
                                        }
                                    ],
                                    "rule": [
                                        {
                                            "name": "48f4c744960e438ebd357cd3c35adeca",
                                            "source": [
                                                {
                                                    "context": "vaccinationadministeredeventItem",
                                                    "condition": "(item.where(linkId = 'immunizations-vaccinationadministeredevent-id').exists().not())"
                                                }
                                            ],
                                            "target": [
                                                {
                                                    "context": "entry",
                                                    "contextType": "variable",
                                                    "element": "request",
                                                    "variable": "request"
                                                }
                                            ],
                                            "rule": [
                                                {
                                                    "name": "d1e3714a69514777b4b53ef71403d797",
                                                    "source": [
                                                        {
                                                            "context": "vaccinationadministeredeventItem"
                                                        }
                                                    ],
                                                    "target": [
                                                        {
                                                            "context": "entry",
                                                            "contextType": "variable",
                                                            "element": "fullUrl",
                                                            "variable": "uuid",
                                                            "transform": "uuid"
                                                        },
                                                        {
                                                            "context": "entry",
                                                            "contextType": "variable",
                                                            "element": "fullUrl",
                                                            "transform": "append",
                                                            "parameter": [
                                                                {
                                                                    "valueString": "urn:uuid:"
                                                                },
                                                                {
                                                                    "valueId": "uuid"
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "context": "request",
                                                            "contextType": "variable",
                                                            "element": "method",
                                                            "transform": "copy",
                                                            "parameter": [
                                                                {
                                                                    "valueString": "POST"
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "context": "entry",
                                                            "contextType": "variable",
                                                            "element": "resource",
                                                            "variable": "immunization",
                                                            "transform": "create",
                                                            "parameter": [
                                                                {
                                                                    "valueString": "Immunization"
                                                                }
                                                            ]
                                                        }
                                                    ],
                                                    "rule": [
                                                        {
                                                            "name": "0050bb23fc904835b9060bcd22995f42",
                                                            "source": [
                                                                {
                                                                    "context": "vaccinationadministeredeventItem"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "immunization",
                                                                    "contextType": "variable",
                                                                    "element": "meta",
                                                                    "variable": "meta"
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "580bad7f5e48419b84f4158da5809e3f",
                                                                    "source": [
                                                                        {
                                                                            "context": "vaccinationadministeredeventItem"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "context": "meta",
                                                                            "contextType": "variable",
                                                                            "element": "profile",
                                                                            "transform": "copy",
                                                                            "parameter": [
                                                                                {
                                                                                    "valueString": "http://hl7.org.au/fhir/core/StructureDefinition/au-core-immunization"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "name": "item",
                                                            "source": [
                                                                {
                                                                    "context": "vaccinationadministeredeventItem",
                                                                    "element": "item",
                                                                    "variable": "nameItem",
                                                                    "condition": "(linkId = 'immunizations-vaccinationadministeredevent-name')"
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "answer",
                                                                    "source": [
                                                                        {
                                                                            "context": "nameItem",
                                                                            "element": "answer"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "context": "immunization",
                                                                            "contextType": "variable",
                                                                            "element": "vaccineCode",
                                                                            "variable": "code"
                                                                        }
                                                                    ],
                                                                    "rule": [
                                                                        {
                                                                            "name": "answer",
                                                                            "source": [
                                                                                {
                                                                                    "context": "nameItem",
                                                                                    "element": "answer",
                                                                                    "variable": "answer"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "code",
                                                                                    "contextType": "variable",
                                                                                    "element": "coding",
                                                                                    "transform": "evaluate",
                                                                                    "parameter": [
                                                                                        {
                                                                                            "valueString": "%answer.value"
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "name": "answer",
                                                                            "source": [
                                                                                {
                                                                                    "context": "nameItem",
                                                                                    "element": "answer",
                                                                                    "variable": "answer"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "code",
                                                                                    "contextType": "variable",
                                                                                    "element": "text",
                                                                                    "transform": "evaluate",
                                                                                    "parameter": [
                                                                                        {
                                                                                            "valueString": "%answer.value.display"
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "name": "item",
                                                            "source": [
                                                                {
                                                                    "context": "vaccinationadministeredeventItem",
                                                                    "element": "item",
                                                                    "variable": "sequenceItem",
                                                                    "condition": "(linkId = 'immunizations-vaccinationadministeredevent-sequence')"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "immunization",
                                                                    "contextType": "variable",
                                                                    "element": "protocolApplied",
                                                                    "variable": "protocolApplied"
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "answer",
                                                                    "source": [
                                                                        {
                                                                            "context": "sequenceItem",
                                                                            "element": "answer",
                                                                            "variable": "answer"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "context": "protocolApplied",
                                                                            "contextType": "variable",
                                                                            "element": "doseNumber",
                                                                            "transform": "evaluate",
                                                                            "parameter": [
                                                                                {
                                                                                    "valueString": "%answer.value"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ],
                                                            "documentation": "immunizations-vaccinationadministeredevent-sequence"
                                                        },
                                                        {
                                                            "name": "item",
                                                            "source": [
                                                                {
                                                                    "context": "vaccinationadministeredeventItem",
                                                                    "element": "item",
                                                                    "variable": "administrationDate",
                                                                    "condition": "(linkId = 'immunizations-vaccinationadministeredevent-administrationDate')"
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "answer",
                                                                    "source": [
                                                                        {
                                                                            "context": "administrationDate",
                                                                            "element": "answer",
                                                                            "variable": "answer"
                                                                        }
                                                                    ],
                                                                    "rule": [
                                                                        {
                                                                            "name": "value",
                                                                            "source": [
                                                                                {
                                                                                    "context": "answer",
                                                                                    "element": "value",
                                                                                    "variable": "adate",
                                                                                    "condition": "(ofType(date).exists())"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "immunization",
                                                                                    "contextType": "variable",
                                                                                    "element": "occurrence",
                                                                                    "transform": "cast",
                                                                                    "parameter": [
                                                                                        {
                                                                                            "valueId": "adate"
                                                                                        },
                                                                                        {
                                                                                            "valueString": "dateTime"
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ],
                                                                            "documentation": "this causes an error in Smart Forms $extract"
                                                                        },
                                                                        {
                                                                            "name": "value",
                                                                            "source": [
                                                                                {
                                                                                    "context": "answer",
                                                                                    "element": "value",
                                                                                    "variable": "adate",
                                                                                    "condition": "(ofType(dateTime).exists())"
                                                                                }
                                                                            ],
                                                                            "target": [
                                                                                {
                                                                                    "context": "immunization",
                                                                                    "contextType": "variable",
                                                                                    "element": "occurrence",
                                                                                    "transform": "copy",
                                                                                    "parameter": [
                                                                                        {
                                                                                            "valueId": "adate"
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ],
                                                                            "documentation": "changed questionnaire to use dateTime rather than date"
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "name": "item",
                                                            "source": [
                                                                {
                                                                    "context": "vaccinationadministeredeventItem",
                                                                    "element": "item",
                                                                    "variable": "comment",
                                                                    "condition": "(linkId = 'immunizations-vaccinationadministeredevent-comment')"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "immunization",
                                                                    "contextType": "variable",
                                                                    "element": "note",
                                                                    "variable": "note"
                                                                }
                                                            ],
                                                            "rule": [
                                                                {
                                                                    "name": "answer",
                                                                    "source": [
                                                                        {
                                                                            "context": "comment",
                                                                            "element": "answer",
                                                                            "variable": "answer"
                                                                        }
                                                                    ],
                                                                    "target": [
                                                                        {
                                                                            "context": "note",
                                                                            "contextType": "variable",
                                                                            "element": "text",
                                                                            "transform": "evaluate",
                                                                            "parameter": [
                                                                                {
                                                                                    "valueString": "%answer.value"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "name": "eaa8d65ff2664d5d828e106ffbefbbea",
                                                            "source": [
                                                                {
                                                                    "context": "vaccinationadministeredeventItem"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "immunization",
                                                                    "contextType": "variable",
                                                                    "element": "status",
                                                                    "transform": "copy",
                                                                    "parameter": [
                                                                        {
                                                                            "valueString": "completed"
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "name": "subject",
                                                            "source": [
                                                                {
                                                                    "context": "src",
                                                                    "element": "subject"
                                                                }
                                                            ],
                                                            "target": [
                                                                {
                                                                    "context": "immunization",
                                                                    "contextType": "variable",
                                                                    "element": "patient",
                                                                    "transform": "evaluate",
                                                                    "parameter": [
                                                                        {
                                                                            "valueString": "%src.subject"
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ],
                            "documentation": "Immunizations"
                        }
                    ]
                }
            ]
        }
    ]
}